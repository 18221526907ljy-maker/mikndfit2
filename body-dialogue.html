<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¿åŠ¨å¿ƒæ€è½¬æ¢ - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }
    .runner-move { animation: runnerMove 2s ease-in-out infinite; }
    @keyframes runnerMove {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(10px); }
    }
    .fade-in { animation: fadeIn 0.8s ease-in; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .gentle-pulse { animation: gentlePulse 2s ease-in-out infinite; }
    @keyframes gentlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 min-h-screen">
  
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-50">
    <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="daily_practice.html" class="text-orange-600 hover:text-orange-700">
        <i class="fas fa-arrow-left mr-2"></i>è¿”å›ç»ƒä¹ 
      </a>
      <h1 class="text-lg font-semibold text-gray-800">è¿åŠ¨å¿ƒæ€è½¬æ¢</h1>
      <div class="w-20"></div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    
    <!-- å¼•è¨€å¡ç‰‡ -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <div class="text-center mb-6">
        <div class="runner-move w-24 h-24 bg-gradient-to-br from-orange-400 to-red-500 rounded-full mx-auto mb-4 flex items-center justify-center">
          <i class="fas fa-running text-4xl text-white"></i>
        </div>
        <h2 class="text-3xl font-bold text-gray-800 mb-3">åº†ç¥èº«ä½“,è€Œéæƒ©ç½šå®ƒ</h2>
        <p class="text-gray-600 text-lg">3åˆ†é’Ÿé‡æ–°å®šä¹‰ä½ è¿åŠ¨çš„ç†ç”±</p>
      </div>

      <div class="grid md:grid-cols-3 gap-4 mb-6">
        <div class="text-center p-4 bg-orange-50 rounded-xl">
          <i class="fas fa-clock text-orange-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">ç»ƒä¹ æ—¶é•¿</div>
          <div class="text-lg font-semibold text-gray-800">3åˆ†é’Ÿ</div>
        </div>
        <div class="text-center p-4 bg-red-50 rounded-xl">
          <i class="fas fa-dumbbell text-red-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">ä½•æ—¶ä½¿ç”¨</div>
          <div class="text-lg font-semibold text-gray-800">è¿åŠ¨å‰/å</div>
        </div>
        <div class="text-center p-4 bg-pink-50 rounded-xl">
          <i class="fas fa-heart text-pink-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">ä¸»è¦æ•ˆæœ</div>
          <div class="text-lg font-semibold text-gray-800">æ”¹å˜åŠ¨æœº</div>
        </div>
      </div>

      <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-6">
        <h3 class="font-bold text-gray-800 mb-3 flex items-center text-lg">
          <i class="fas fa-exclamation-triangle text-orange-600 mr-3"></i>
          è¿™ä¸ªç»ƒä¹ ç‰¹åˆ«é€‚åˆä½ ,å¦‚æœ...
        </h3>
        <ul class="space-y-2 text-gray-700">
          <li class="flex items-start">
            <i class="fas fa-check text-orange-600 mr-2 mt-1"></i>
            <span>è¿åŠ¨çš„ä¸»è¦åŠ¨æœºæ˜¯"å‡è‚¥""ç‡ƒè„‚""æ¶ˆè€—å¡è·¯é‡Œ"</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check text-orange-600 mr-2 mt-1"></i>
            <span>åƒå¤šäº†å°±å¼ºè¿«è‡ªå·±è¿åŠ¨"è¡¥å¿"</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check text-orange-600 mr-2 mt-1"></i>
            <span>è¿åŠ¨æ—¶è„‘æµ·ä¸­éƒ½æ˜¯"è¿˜æ²¡ç˜¦""æ•ˆæœä¸å¤Ÿ"</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check text-orange-600 mr-2 mt-1"></i>
            <span>æƒ³å»ºç«‹æ›´å¥åº·ã€æ›´å¯æŒç»­çš„è¿åŠ¨å…³ç³»</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- å¿ƒæ€å¯¹æ¯” -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <i class="fas fa-exchange-alt text-red-600 mr-3"></i>
        ä»"æƒ©ç½š"åˆ°"åº†ç¥"çš„å¿ƒæ€è½¬æ¢
      </h3>
      
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div class="bg-red-50 border-2 border-red-200 rounded-xl p-6">
          <h4 class="font-bold text-red-700 mb-4 text-center flex items-center justify-center">
            <i class="fas fa-times-circle mr-2"></i>æƒ©ç½šæ€§è¿åŠ¨
          </h4>
          <ul class="space-y-3 text-sm text-gray-700">
            <li class="bg-white rounded-lg p-3 border-l-4 border-red-400">
              <div class="font-semibold text-red-700 mb-1">åŠ¨æœº</div>
              "æˆ‘æ˜¨å¤©åƒå¤šäº†,å¿…é¡»è·‘æ­¥æ¶ˆè€—æ‰"
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-red-400">
              <div class="font-semibold text-red-700 mb-1">å…³æ³¨ç‚¹</div>
              "æ¶ˆè€—äº†å¤šå°‘å¡è·¯é‡Œ?""ç˜¦äº†æ²¡?"
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-red-400">
              <div class="font-semibold text-red-700 mb-1">æ„Ÿå—</div>
              ç–²æƒ«ã€ç„¦è™‘ã€æ°¸è¿œä¸å¤Ÿå¥½
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-red-400">
              <div class="font-semibold text-red-700 mb-1">ç»“æœ</div>
              å®¹æ˜“å—ä¼¤ã€æ”¾å¼ƒã€è®¨åŒè¿åŠ¨
            </li>
          </ul>
        </div>

        <div class="bg-green-50 border-2 border-green-200 rounded-xl p-6">
          <h4 class="font-bold text-green-700 mb-4 text-center flex items-center justify-center">
            <i class="fas fa-check-circle mr-2"></i>åº†ç¥æ€§è¿åŠ¨
          </h4>
          <ul class="space-y-3 text-sm text-gray-700">
            <li class="bg-white rounded-lg p-3 border-l-4 border-green-400">
              <div class="font-semibold text-green-700 mb-1">åŠ¨æœº</div>
              "æˆ‘æƒ³æ„Ÿå—èº«ä½“çš„åŠ›é‡å’Œæ´»åŠ›"
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-green-400">
              <div class="font-semibold text-green-700 mb-1">å…³æ³¨ç‚¹</div>
              "æˆ‘æ„Ÿè§‰å¦‚ä½•?""æˆ‘äº«å—å—?"
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-green-400">
              <div class="font-semibold text-green-700 mb-1">æ„Ÿå—</div>
              æœ‰æ´»åŠ›ã€å¿«ä¹ã€ä¸ºèº«ä½“éª„å‚²
            </li>
            <li class="bg-white rounded-lg p-3 border-l-4 border-green-400">
              <div class="font-semibold text-green-700 mb-1">ç»“æœ</div>
              å¯æŒç»­ã€äº«å—è¿‡ç¨‹ã€å»ºç«‹ä¹ æƒ¯
            </li>
          </ul>
        </div>
      </div>

      <div class="bg-blue-50 border-l-4 border-blue-400 rounded-r-xl p-4">
        <p class="text-sm text-gray-700">
          <i class="fas fa-lightbulb text-blue-600 mr-2"></i>
          <strong>å…³é”®åŒºåˆ«:</strong> æƒ©ç½šæ€§è¿åŠ¨æŠŠèº«ä½“å½“ä½œ"éœ€è¦æ”¹é€ çš„æ•Œäºº",åº†ç¥æ€§è¿åŠ¨æŠŠèº«ä½“å½“ä½œ"å€¼å¾—å–„å¾…çš„ä¼™ä¼´"ã€‚å‰è€…ä¸å¯æŒç»­,åè€…æ‰èƒ½é•¿æœŸåšæŒã€‚
        </p>
      </div>
    </div>

    <!-- å¼€å§‹ç»ƒä¹ æŒ‰é’® -->
    <div class="text-center mb-8">
      <div class="mb-4">
        <p class="text-gray-600 mb-2">é€‰æ‹©ç»ƒä¹ æ—¶æœº:</p>
        <div class="flex gap-3 justify-center flex-wrap">
          <button onclick="startPractice('before')" class="bg-orange-100 hover:bg-orange-200 text-orange-700 px-6 py-3 rounded-xl font-medium transition-all">
            <i class="fas fa-play mr-2"></i>è¿åŠ¨å‰
          </button>
          <button onclick="startPractice('after')" class="bg-pink-100 hover:bg-pink-200 text-pink-700 px-6 py-3 rounded-xl font-medium transition-all">
            <i class="fas fa-check mr-2"></i>è¿åŠ¨å
          </button>
        </div>
      </div>
    </div>

    <!-- å¥åº·è¿åŠ¨æŒ‡å— -->
    <div class="bg-white rounded-3xl shadow-lg p-8">
      <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
        <i class="fas fa-heart-pulse text-purple-600 mr-3"></i>
        å¥åº·è¿åŠ¨çš„5ä¸ªæ ‡å¿—
      </h3>
      
      <div class="space-y-4">
        <div class="flex items-start p-4 bg-purple-50 rounded-xl">
          <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">
            1
          </div>
          <div>
            <div class="font-semibold text-gray-800 mb-1">ä½ æœŸå¾…è¿åŠ¨,è€Œéææƒ§å®ƒ</div>
            <div class="text-sm text-gray-600">å¦‚æœè¿åŠ¨è®©ä½ ç„¦è™‘æˆ–ç—›è‹¦,è¯´æ˜åŠ¨æœºå¯èƒ½æœ‰é—®é¢˜ã€‚å¥åº·çš„è¿åŠ¨åº”è¯¥æ˜¯ä½ æƒ³åšçš„,è€Œé"å¿…é¡»"åšçš„ã€‚</div>
          </div>
        </div>

        <div class="flex items-start p-4 bg-purple-50 rounded-xl">
          <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">
            2
          </div>
          <div>
            <div class="font-semibold text-gray-800 mb-1">ä½ èƒ½è·³è¿‡ä¸€æ¬¡è€Œä¸å†…ç–š</div>
            <div class="text-sm text-gray-600">å¶å°”ä¼‘æ¯æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœé”™è¿‡ä¸€æ¬¡å°±å¼ºçƒˆè‡ªè´£,è¯´æ˜è¿åŠ¨å¯èƒ½å˜æˆäº†å¼ºè¿«è¡Œä¸ºã€‚</div>
          </div>
        </div>

        <div class="flex items-start p-4 bg-purple-50 rounded-xl">
          <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">
            3
          </div>
          <div>
            <div class="font-semibold text-gray-800 mb-1">ä½ é€‰æ‹©è‡ªå·±å–œæ¬¢çš„è¿åŠ¨æ–¹å¼</div>
            <div class="text-sm text-gray-600">ä¸æ˜¯æ‰€æœ‰äººéƒ½é€‚åˆè·‘æ­¥æˆ–å¥èº«æˆ¿ã€‚æ•£æ­¥ã€è·³èˆã€æ¸¸æ³³éƒ½æ˜¯å¾ˆå¥½çš„è¿åŠ¨ã€‚é€‰æ‹©ä½ äº«å—çš„,è€Œé"æœ€ç‡ƒè„‚"çš„ã€‚</div>
          </div>
        </div>

        <div class="flex items-start p-4 bg-purple-50 rounded-xl">
          <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">
            4
          </div>
          <div>
            <div class="font-semibold text-gray-800 mb-1">ä½ å€¾å¬èº«ä½“çš„ä¿¡å·</div>
            <div class="text-sm text-gray-600">ç´¯äº†å°±ä¼‘æ¯,ç—›äº†å°±åœä¸‹ã€‚"No pain, no gain"æ˜¯æœ‰å®³çš„ã€‚å°Šé‡èº«ä½“çš„æé™,é¿å…å—ä¼¤ã€‚</div>
          </div>
        </div>

        <div class="flex items-start p-4 bg-purple-50 rounded-xl">
          <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">
            5
          </div>
          <div>
            <div class="font-semibold text-gray-800 mb-1">è¿åŠ¨åæ„Ÿè§‰æ›´å¥½,è€Œéæ›´ç³Ÿ</div>
            <div class="text-sm text-gray-600">å¥åº·çš„è¿åŠ¨è®©ä½ ç²¾åŠ›å……æ²›ã€å¿ƒæƒ…æ„‰æ‚¦ã€‚å¦‚æœæ€»æ˜¯ç­‹ç–²åŠ›å°½æˆ–æƒ…ç»ªä½è½,è¯´æ˜å¼ºåº¦æˆ–åŠ¨æœºéœ€è¦è°ƒæ•´ã€‚</div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- ç»ƒä¹ æ¨¡æ€æ¡† -->
  <div id="practiceModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full p-8">
      
      <!-- è¿›åº¦æ˜¾ç¤º -->
      <div class="text-center mb-6">
        <div id="stepIndicator" class="text-sm text-gray-500 mb-2">æ­¥éª¤ 1/3</div>
        <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
          <div id="progressBar" class="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full transition-all duration-500" style="width: 33%"></div>
        </div>
      </div>

      <!-- å½“å‰æ­¥éª¤å›¾æ ‡ -->
      <div class="text-center mb-6">
        <div id="stepIcon" class="w-20 h-20 bg-orange-100 rounded-full mx-auto mb-4 flex items-center justify-center fade-in">
          <i class="fas fa-question text-3xl text-orange-600"></i>
        </div>
      </div>

      <!-- å¼•å¯¼å†…å®¹ -->
      <div id="guideContent" class="text-center mb-8 min-h-[200px]">
        <h3 id="guideTitle" class="text-2xl font-bold text-gray-800 mb-4 fade-in">æ£€è§†åŠ¨æœº</h3>
        <p id="guideText" class="text-gray-600 leading-relaxed fade-in">
          é—®é—®è‡ªå·±:æˆ‘ä¸ºä»€ä¹ˆè¦è¿åŠ¨?æ˜¯ä¸ºäº†æƒ©ç½šæ˜¨å¤©åƒçš„é£Ÿç‰©?è¿˜æ˜¯å› ä¸ºæˆ‘æƒ³æ„Ÿå—èº«ä½“çš„åŠ›é‡?
        </p>
      </div>

      <!-- è®¡æ—¶å™¨ -->
      <div class="text-center mb-6">
        <div id="timer" class="text-4xl font-bold text-orange-600">0:00</div>
        <div class="text-sm text-gray-500 mt-1">æœ¬æ­¥éª¤å€’è®¡æ—¶</div>
      </div>

      <!-- æ§åˆ¶æŒ‰é’® -->
      <div class="flex gap-3">
        <button onclick="skipStep()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-forward mr-2"></i>è·³è¿‡
        </button>
        <button id="pauseBtn" onclick="togglePause()" class="flex-1 bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-pause mr-2"></i>æš‚åœ
        </button>
      </div>

    </div>
  </div>

  <!-- å®Œæˆæ¨¡æ€æ¡† -->
  <div id="completionModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full p-8">
      
      <div class="text-center mb-6">
        <div class="w-24 h-24 bg-green-100 rounded-full mx-auto mb-4 flex items-center justify-center">
          <i class="fas fa-check-circle text-5xl text-green-600"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">ğŸ’ª ç»ƒä¹ å®Œæˆ!</h3>
        <p class="text-gray-600" id="completionMessage">ä½ åˆšåˆšé‡æ–°å®šä¹‰äº†è¿åŠ¨çš„æ„ä¹‰</p>
      </div>

      <div class="bg-gradient-to-r from-orange-50 to-pink-50 rounded-2xl p-6 mb-6">
        <h4 class="font-semibold text-gray-800 mb-3">ğŸ’¡ è®°ä½è¿™äº›:</h4>
        <ul class="space-y-2 text-sm text-gray-700">
          <li class="flex items-start">
            <i class="fas fa-star text-orange-600 mr-2 mt-1"></i>
            <span>è¿åŠ¨æ˜¯åº†ç¥èº«ä½“èƒ½åšçš„äº‹,è€Œéæƒ©ç½šåƒçš„ä¸œè¥¿</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-star text-orange-600 mr-2 mt-1"></i>
            <span>å…³æ³¨æ„Ÿå—è€Œéæ•°å­—,äº«å—è¿‡ç¨‹è€Œéç»“æœ</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-star text-orange-600 mr-2 mt-1"></i>
            <span>èº«ä½“æ˜¯ä¼™ä¼´ä¸æ˜¯æ•Œäºº,æ¸©æŸ”å¯¹å¾…å®ƒ</span>
          </li>
        </ul>
      </div>

      <div class="bg-purple-50 border-2 border-purple-200 rounded-xl p-4 mb-6">
        <h4 class="font-semibold text-gray-800 mb-2 flex items-center">
          <i class="fas fa-tools text-purple-600 mr-2"></i>
          æƒ³è¦æ›´ç³»ç»Ÿçš„æ”¹å˜?
        </h4>
        <p class="text-sm text-gray-600 mb-3">
          è¯•è¯•<strong>"è¿åŠ¨æ—¥å¿—"</strong>,å¯ä»¥å¸®ä½ è¿½è¸ªè¿åŠ¨åŠ¨æœºå’Œæ„Ÿå—çš„å˜åŒ–,å»ºç«‹æ›´å¥åº·çš„è¿åŠ¨ä¹ æƒ¯ã€‚
        </p>
        <button onclick="goToTool()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg text-sm font-medium transition-all">
          <i class="fas fa-arrow-right mr-2"></i>å‰å¾€æ·±åº¦å·¥å…·
        </button>
      </div>

      <button onclick="closeCompletion()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium transition-all">
        å®Œæˆå¹¶è¿”å›
      </button>

    </div>
  </div>

  <script>
    let currentStep = 0;
    let timer = null;
    let remainingSeconds = 0;
    let isPaused = false;
    let totalTime = 0;
    let practiceMode = 'before'; // before, after

    const stepsByMode = {
      before: [
        {
          title: 'æ£€è§†åŠ¨æœº',
          icon: 'fa-question',
          iconColor: 'orange',
          text: 'é—®é—®è‡ªå·±:æˆ‘ä¸ºä»€ä¹ˆè¦è¿åŠ¨?æ˜¯ä¸ºäº†æƒ©ç½šæ˜¨å¤©åƒçš„é£Ÿç‰©?è¿˜æ˜¯å› ä¸ºæˆ‘æƒ³æ„Ÿå—èº«ä½“çš„åŠ›é‡?è¯šå®åœ°è§‰å¯Ÿä½ çš„åŠ¨æœº,ä¸åšè¯„åˆ¤ã€‚',
          duration: 50
        },
        {
          title: 'é‡æ–°è®¾å®šæ„å›¾',
          icon: 'fa-bullseye',
          iconColor: 'red',
          text: 'åœ¨å¿ƒä¸­é»˜å¿µ:"æˆ‘è¿åŠ¨æ˜¯ä¸ºäº†åº†ç¥æˆ‘çš„èº«ä½“èƒ½åšçš„äº‹ã€‚""æˆ‘çš„ç›®æ ‡æ˜¯æ„Ÿè§‰è‰¯å¥½,è€Œéè¾¾åˆ°æŸä¸ªä½“é‡ã€‚""æˆ‘é€‰æ‹©äº«å—è¿‡ç¨‹,è€Œéå¼ºè¿«è‡ªå·±ã€‚"',
          duration: 60
        },
        {
          title: 'å¼€å§‹è¿åŠ¨',
          icon: 'fa-play-circle',
          iconColor: 'pink',
          text: 'æ·±å‘¼å¸,å¾®ç¬‘ã€‚å¸¦ç€æ„Ÿæ¿€å’Œå°Šé‡å¼€å§‹è¿åŠ¨ã€‚æé†’è‡ªå·±:ä»Šå¤©çš„è¿åŠ¨,æ— è®ºå¼ºåº¦å¦‚ä½•ã€æ—¶é•¿å¤šä¹…,éƒ½æ˜¯åœ¨å–„å¾…èº«ä½“ã€‚',
          duration: 30
        }
      ],
      
      after: [
        {
          title: 'æ„Ÿå—èº«ä½“',
          icon: 'fa-heart-pulse',
          iconColor: 'orange',
          text: 'è¿åŠ¨å,åœä¸‹æ¥æ„Ÿå—èº«ä½“ã€‚æ³¨æ„å¿ƒè·³ã€å‘¼å¸ã€è‚Œè‚‰çš„æ„Ÿè§‰ã€‚è¿™æ˜¯ä½ èº«ä½“åœ¨å·¥ä½œã€åœ¨å¼ºå£®ã€åœ¨ä¸ºä½ æœåŠ¡çš„è¯æ˜ã€‚',
          duration: 40
        },
        {
          title: 'åº†ç¥è€Œéè¯„åˆ¤',
          icon: 'fa-trophy',
          iconColor: 'red',
          text: 'ä¸è¦é—®"æˆ‘æ¶ˆè€—äº†å¤šå°‘å¡è·¯é‡Œ?"è€Œæ˜¯é—®"æˆ‘æ„Ÿè§‰å¦‚ä½•?""æˆ‘äº«å—äº†å—?"å¦‚æœç­”æ¡ˆæ˜¯ç§¯æçš„,é‚£å°±æ˜¯æˆåŠŸ,æ— è®ºä½ è¿åŠ¨äº†å¤šä¹…ã€‚',
          duration: 50
        },
        {
          title: 'æ„Ÿè°¢èº«ä½“',
          icon: 'fa-hands-praying',
          iconColor: 'pink',
          text: 'å¯¹è‡ªå·±è¯´:"è°¢è°¢æˆ‘çš„èº«ä½“,èƒ½è·‘/èµ°/è·³/æ‹‰ä¼¸ã€‚""æˆ‘ä¸ºè‡ªå·±éª„å‚²,å› ä¸ºæˆ‘å–„å¾…äº†èº«ä½“ã€‚"æ·±å‘¼å¸,å¾®ç¬‘,ç»§ç»­ç¾å¥½çš„ä¸€å¤©ã€‚',
          duration: 50
        }
      ]
    };

    function startPractice(mode) {
      practiceMode = mode;
      document.getElementById('practiceModal').classList.remove('hidden');
      currentStep = 0;
      totalTime = 0;
      renderStep();
    }

    function renderStep() {
      const steps = stepsByMode[practiceMode];
      const step = steps[currentStep];
      
      // æ›´æ–°è¿›åº¦
      const progress = ((currentStep + 1) / steps.length) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
      document.getElementById('stepIndicator').textContent = `æ­¥éª¤ ${currentStep + 1}/${steps.length}`;

      // æ›´æ–°å›¾æ ‡
      const iconColors = {
        orange: 'bg-orange-100 text-orange-600',
        red: 'bg-red-100 text-red-600',
        pink: 'bg-pink-100 text-pink-600'
      };
      
      const iconDiv = document.getElementById('stepIcon');
      iconDiv.className = `w-20 h-20 ${iconColors[step.iconColor]} rounded-full mx-auto mb-4 flex items-center justify-center fade-in`;
      iconDiv.innerHTML = `<i class="fas ${step.icon} text-3xl"></i>`;

      // æ›´æ–°æ–‡å­—
      document.getElementById('guideTitle').textContent = step.title;
      document.getElementById('guideText').textContent = step.text;

      // å¼€å§‹è®¡æ—¶
      remainingSeconds = step.duration;
      isPaused = false;
      updateTimer();
      startTimer();
    }

    function startTimer() {
      clearInterval(timer);
      timer = setInterval(() => {
        if (!isPaused && remainingSeconds > 0) {
          remainingSeconds--;
          totalTime++;
          updateTimer();
          
          if (remainingSeconds === 0) {
            nextStep();
          }
        }
      }, 1000);
    }

    function updateTimer() {
      const minutes = Math.floor(remainingSeconds / 60);
      const seconds = remainingSeconds % 60;
      document.getElementById('timer').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function nextStep() {
      const steps = stepsByMode[practiceMode];
      if (currentStep < steps.length - 1) {
        currentStep++;
        renderStep();
      } else {
        completePractice();
      }
    }

    function skipStep() {
      nextStep();
    }

    function togglePause() {
      isPaused = !isPaused;
      const btn = document.getElementById('pauseBtn');
      btn.innerHTML = isPaused ? 
        '<i class="fas fa-play mr-2"></i>ç»§ç»­' : 
        '<i class="fas fa-pause mr-2"></i>æš‚åœ';
    }

    function completePractice() {
      clearInterval(timer);
      
      // ä¿å­˜ç»ƒä¹ è®°å½•
      const modeNames = {
        before: 'è¿åŠ¨å‰',
        after: 'è¿åŠ¨å'
      };
      
      const record = {
        id: Date.now(),
        title: `è¿åŠ¨å¿ƒæ€è½¬æ¢(${modeNames[practiceMode]})`,
        category: 'mindful',
        duration: Math.ceil(totalTime / 60),
        date: new Date().toISOString(),
        timestamp: Date.now()
      };

      const history = JSON.parse(localStorage.getItem('practiceHistory') || '[]');
      history.push(record);
      localStorage.setItem('practiceHistory', JSON.stringify(history));

      // æ›´æ–°å®Œæˆæ¶ˆæ¯
      const messages = {
        before: 'ä½ åˆšåˆšé‡æ–°å®šä¹‰äº†è¿åŠ¨çš„æ„ä¹‰',
        after: 'ä½ åˆšåˆšåº†ç¥äº†èº«ä½“çš„èƒ½åŠ›'
      };
      document.getElementById('completionMessage').textContent = messages[practiceMode];

      // æ˜¾ç¤ºå®Œæˆç•Œé¢
      document.getElementById('practiceModal').classList.add('hidden');
      document.getElementById('completionModal').classList.remove('hidden');
    }

    function closeCompletion() {
      document.getElementById('completionModal').classList.add('hidden');
      window.location.href = 'daily_practice.html';
    }

    function goToTool() {
      // è·³è½¬åˆ°æ·±åº¦å·¥å…·é¡µé¢
      window.location.href = 'exercise-log.html';
    }
  </script>

</body>
</html>
