<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ™šé—´æ”¾æ¾ç»ƒä¹  - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }
    .breathing-circle { transition: all 4s cubic-bezier(0.4, 0, 0.2, 1); }
    .breathing-circle.inhale { transform: scale(1.5); opacity: 0.8; }
    .breathing-circle.exhale { transform: scale(1); opacity: 1; }
    .progress-ring { transform: rotate(-90deg); }
    .toast { position: fixed; top: 20px; right: 20px; z-index: 1000; }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen">
  
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-50">
    <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="daily_practice.html" class="text-indigo-600 hover:text-indigo-700">
        <i class="fas fa-arrow-left mr-2"></i>è¿”å›ç»ƒä¹ 
      </a>
      <h1 class="text-lg font-semibold text-gray-800">æ™šé—´æ”¾æ¾ç»ƒä¹ </h1>
      <div class="w-20"></div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    
    <!-- ç»ƒä¹ ä»‹ç»å¡ç‰‡ -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <div class="text-center mb-6">
        <div class="w-20 h-20 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full mx-auto mb-4 flex items-center justify-center">
          <i class="fas fa-moon text-3xl text-white"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">æ™šé—´èº«å¿ƒæ”¾æ¾</h2>
        <p class="text-gray-600">é‡Šæ”¾ä¸€å¤©çš„ç–²æƒ«,è®©èº«å¿ƒè¿›å…¥æ·±åº¦ä¼‘æ¯</p>
      </div>

      <div class="grid md:grid-cols-3 gap-4 mb-6">
        <div class="text-center p-4 bg-indigo-50 rounded-xl">
          <i class="fas fa-clock text-indigo-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">å»ºè®®æ—¶é•¿</div>
          <div class="text-lg font-semibold text-gray-800">8-10åˆ†é’Ÿ</div>
        </div>
        <div class="text-center p-4 bg-purple-50 rounded-xl">
          <i class="fas fa-star text-purple-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">éš¾åº¦ç­‰çº§</div>
          <div class="text-lg font-semibold text-gray-800">ç®€å•</div>
        </div>
        <div class="text-center p-4 bg-pink-50 rounded-xl">
          <i class="fas fa-heart text-pink-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">ä¸»è¦æ•ˆæœ</div>
          <div class="text-lg font-semibold text-gray-800">åŠ©çœ æ”¾æ¾</div>
        </div>
      </div>

      <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
          <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
          ç»ƒä¹ è¯´æ˜
        </h3>
        <ul class="space-y-2 text-gray-700 text-sm">
          <li class="flex items-start">
            <i class="fas fa-check-circle text-indigo-600 mr-2 mt-1"></i>
            <span>é€‰æ‹©ä¸€ä¸ªèˆ’é€‚çš„ç¯å¢ƒ,å¯ä»¥åç€æˆ–èººåœ¨åºŠä¸Š</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-indigo-600 mr-2 mt-1"></i>
            <span>å…³é—­æˆ–è°ƒæš—æˆ¿é—´ç¯å…‰,è¥é€ æ”¾æ¾æ°›å›´</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-indigo-600 mr-2 mt-1"></i>
            <span>è·Ÿéšè¯­éŸ³å¼•å¯¼,é€æ­¥æ”¾æ¾èº«ä½“å„ä¸ªéƒ¨ä½</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-indigo-600 mr-2 mt-1"></i>
            <span>å¦‚æœç»ƒä¹ ä¸­ç¡ç€äº†ä¹Ÿæ²¡å…³ç³»,è¿™æ˜¯æ­£å¸¸çš„</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- é€‰æ‹©æ—¶é•¿ -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <h3 class="text-xl font-semibold text-gray-800 mb-6 text-center">é€‰æ‹©ç»ƒä¹ æ—¶é•¿</h3>
      <div class="grid grid-cols-3 gap-4">
        <button onclick="startPractice(5)" class="duration-btn p-6 border-2 border-gray-200 rounded-2xl hover:border-indigo-400 hover:bg-indigo-50 transition-all">
          <div class="text-3xl font-bold text-indigo-600 mb-2">5</div>
          <div class="text-sm text-gray-600">åˆ†é’Ÿ</div>
          <div class="text-xs text-gray-500 mt-2">å¿«é€Ÿç‰ˆ</div>
        </button>
        <button onclick="startPractice(8)" class="duration-btn p-6 border-2 border-indigo-400 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all">
          <div class="text-3xl font-bold text-indigo-600 mb-2">8</div>
          <div class="text-sm text-gray-600">åˆ†é’Ÿ</div>
          <div class="text-xs text-gray-500 mt-2">æ ‡å‡†ç‰ˆâ­</div>
        </button>
        <button onclick="startPractice(10)" class="duration-btn p-6 border-2 border-gray-200 rounded-2xl hover:border-indigo-400 hover:bg-indigo-50 transition-all">
          <div class="text-3xl font-bold text-indigo-600 mb-2">10</div>
          <div class="text-sm text-gray-600">åˆ†é’Ÿ</div>
          <div class="text-xs text-gray-500 mt-2">æ·±åº¦ç‰ˆ</div>
        </button>
      </div>
    </div>

  </main>

  <!-- ç»ƒä¹ è¿›è¡Œä¸­çš„æ¨¡æ€æ¡† -->
  <div id="practiceModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full p-8">
      
      <!-- è¿›åº¦åœˆ -->
      <div class="relative w-48 h-48 mx-auto mb-8">
        <svg class="w-48 h-48 progress-ring">
          <circle cx="96" cy="96" r="88" stroke="#E5E7EB" stroke-width="8" fill="none"/>
          <circle id="progressCircle" cx="96" cy="96" r="88" stroke="#6366F1" stroke-width="8" fill="none"
                  stroke-dasharray="552.92" stroke-dashoffset="552.92" stroke-linecap="round"/>
        </svg>
        <div class="absolute inset-0 flex flex-col items-center justify-center">
          <div id="timeDisplay" class="text-4xl font-bold text-gray-800">8:00</div>
          <div class="text-sm text-gray-500 mt-2">å‰©ä½™æ—¶é—´</div>
        </div>
      </div>

      <!-- å½“å‰å¼•å¯¼è¯­ -->
      <div class="text-center mb-8">
        <div id="currentGuide" class="text-lg text-gray-700 leading-relaxed min-h-[60px]">
          å‡†å¤‡å¼€å§‹...
        </div>
      </div>

      <!-- å‘¼å¸å¯è§†åŒ– -->
      <div class="flex justify-center mb-8">
        <div id="breathCircle" class="breathing-circle w-24 h-24 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full"></div>
      </div>

      <!-- æ§åˆ¶æŒ‰é’® -->
      <div class="flex gap-3">
        <button id="pauseBtn" onclick="togglePause()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-pause mr-2"></i>æš‚åœ
        </button>
        <button onclick="endPractice()" class="flex-1 bg-red-50 hover:bg-red-100 text-red-600 py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-stop mr-2"></i>ç»“æŸ
        </button>
      </div>
    </div>
  </div>

  <script>
    let timer = null;
    let totalSeconds = 0;
    let remainingSeconds = 0;
    let isPaused = false;
    let currentStep = 0;

    const guides = [
      { time: 0, text: "è½»è½»é—­ä¸Šçœ¼ç›,è®©ä»Šå¤©çš„å¿™ç¢Œæ…¢æ…¢è¿œå»..." },
      { time: 30, text: "æ·±å‘¼å¸,å¸æ°”...å‘¼æ°”...æ„Ÿå—æ°”æ¯çš„è‡ªç„¶æµåŠ¨" },
      { time: 60, text: "æ”¾æ¾ä½ çš„é¢éƒ¨è‚Œè‚‰,è®©çœ‰å¤´èˆ’å±•å¼€æ¥" },
      { time: 90, text: "æ”¾æ¾ä½ çš„è‚©è†€å’Œé¢ˆéƒ¨,è®©ç´§å¼ æ…¢æ…¢é‡Šæ”¾" },
      { time: 120, text: "æ”¾æ¾ä½ çš„åŒè‡‚å’ŒåŒæ‰‹,æ„Ÿå—é‡åŠ›çš„æ‹‰æ‰¯" },
      { time: 180, text: "æ”¾æ¾ä½ çš„èƒ¸éƒ¨å’Œè…¹éƒ¨,è®©å‘¼å¸æ›´åŠ è‡ªç„¶" },
      { time: 240, text: "æ”¾æ¾ä½ çš„åŒè…¿,ä»å¤§è…¿åˆ°å°è…¿å†åˆ°è„šå°–" },
      { time: 300, text: "å…¨èº«éƒ½å·²æ”¾æ¾,æ„Ÿå—è¿™ä»½å®é™ä¸å®‰è¯¦" },
      { time: 360, text: "ç»§ç»­ä¿æŒè¿™ä»½æ”¾æ¾,è®©èº«å¿ƒå®Œå…¨ä¼‘æ¯" },
      { time: 420, text: "æ…¢æ…¢åŠ æ·±å‘¼å¸,å‡†å¤‡ç»“æŸä»Šå¤©çš„ç»ƒä¹ " }
    ];

    function startPractice(minutes) {
      totalSeconds = minutes * 60;
      remainingSeconds = totalSeconds;
      currentStep = 0;
      isPaused = false;

      document.getElementById('practiceModal').classList.remove('hidden');
      updateDisplay();
      startTimer();
      startBreathAnimation();
    }

    function startTimer() {
      timer = setInterval(() => {
        if (!isPaused && remainingSeconds > 0) {
          remainingSeconds--;
          updateDisplay();
          updateGuide();
          
          if (remainingSeconds === 0) {
            completePractice();
          }
        }
      }, 1000);
    }

    function updateDisplay() {
      const minutes = Math.floor(remainingSeconds / 60);
      const seconds = remainingSeconds % 60;
      document.getElementById('timeDisplay').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;

      const progress = ((totalSeconds - remainingSeconds) / totalSeconds) * 552.92;
      document.getElementById('progressCircle').style.strokeDashoffset = 552.92 - progress;
    }

    function updateGuide() {
      const elapsed = totalSeconds - remainingSeconds;
      const currentGuide = guides.filter(g => g.time <= elapsed).pop();
      if (currentGuide) {
        document.getElementById('currentGuide').textContent = currentGuide.text;
      }
    }

    function startBreathAnimation() {
      const circle = document.getElementById('breathCircle');
      let isInhaling = true;

      setInterval(() => {
        if (!isPaused) {
          if (isInhaling) {
            circle.classList.add('inhale');
            circle.classList.remove('exhale');
          } else {
            circle.classList.add('exhale');
            circle.classList.remove('inhale');
          }
          isInhaling = !isInhaling;
        }
      }, 4000);
    }

    function togglePause() {
      isPaused = !isPaused;
      const btn = document.getElementById('pauseBtn');
      btn.innerHTML = isPaused ? 
        '<i class="fas fa-play mr-2"></i>ç»§ç»­' : 
        '<i class="fas fa-pause mr-2"></i>æš‚åœ';
    }

    function endPractice() {
      if (confirm('ç¡®å®šè¦ç»“æŸç»ƒä¹ å—?')) {
        clearInterval(timer);
        savePracticeRecord();
        window.location.href = 'daily_practice.html';
      }
    }

    function completePractice() {
      clearInterval(timer);
      savePracticeRecord();
      alert('ğŸ‰ ç»ƒä¹ å®Œæˆ!ä»Šæ™šä¸€å®šèƒ½ç¡ä¸ªå¥½è§‰!');
      window.location.href = 'daily_practice.html';
    }

    function savePracticeRecord() {
      const record = {
        id: Date.now(),
        title: 'æ™šé—´æ”¾æ¾ç»ƒä¹ ',
        category: 'body',
        duration: Math.floor((totalSeconds - remainingSeconds) / 60),
        date: new Date().toISOString(),
        timestamp: Date.now()
      };

      const history = JSON.parse(localStorage.getItem('practiceHistory') || '[]');
      history.push(record);
      localStorage.setItem('practiceHistory', JSON.stringify(history));
    }
  </script>

</body>
</html>
