<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>MindFit - 身心焦虑自助工具</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" href="mindfit-style.css">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#0d9488",
            secondary: "#10B981",
            accent: "#6366f1",
            neutral: "#F3F4F6",
            dark: "#1F2937",
            light: "#F9FAFB",
          },
          fontFamily: {
            sans: ["PingFang SC", "Helvetica Neue", "Arial", "sans-serif"],
          },
        },
      },
    };
  </script>
</head>

<body class="bg-gray-50 font-sans text-dark min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="fixed top-0 left-0 right-0 glass-card shadow-sm z-50">
    <div class="flex items-center justify-between px-4 py-3">
      <div class="flex items-center">
        <button id="backBtn" class="p-2 text-gray-500 hover:text-primary transition-smooth">
          <i class="fa fa-arrow-left text-lg"></i>
        </button>
        <h1 id="pageTitle" class="text-xl font-medium ml-2">MindFit 身心管理</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button class="p-2 text-gray-500 hover:text-primary transition-smooth" data-target="myRecordsPage">
          <i class="fa fa-list-alt text-lg"></i>
        </button>
        <button class="p-2 text-gray-500 hover:text-primary transition-smooth" data-target="myBadgesPage">
          <i class="fa fa-star-o text-lg"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- 提示 Toast -->
  <div id="toast" class="fixed left-1/2 -translate-x-1/2 top-16 z-[60] hidden">
    <div class="bg-gray-900 text-white text-sm px-3 py-2 rounded-md shadow-lg"></div>
  </div>

  <!-- 主内容区 -->
  <main class="pt-16 pb-20 min-h-screen">
    <!-- 首页 -->
    <section id="homePage" class="page active">
      <div class="px-4 py-6">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-[clamp(1.5rem,3vw,1.8rem)] font-bold">身心焦虑自助工具</h2>
          <div class="flex items-center">
            <span class="text-sm text-gray-500 mr-2">我的进度</span>
            <div class="w-28 h-2 bg-gray-200 rounded-full overflow-hidden">
              <i class="ph ph-chart-line text-slate-500 text-2xl"></i>
              <div id="progressBar" class="h-full bg-primary rounded-full" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <!-- 功能卡片网格 -->
        <div class="grid grid-cols-2 gap-4 mb-8">
          <!-- 轻测评 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="assessmentPage">
            <div class="w-14 h-14 rounded-full bg-pink-100 flex items-center justify-center mb-3">
             <i class="ph ph-heartbeat text-pink-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">身心轻测评</h3>
          </div>

          <!-- 自动思维记录 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="thoughtRecordPage">
            <div class="w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center mb-3">
             <i class="ph ph-pencil-simple text-blue-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">自动思维记录</h3>
          </div>

          <!-- 情绪调节卡片 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="emotionRegulationPage">
            <div class="w-14 h-14 rounded-full bg-green-100 flex items-center justify-center mb-3">
             <i class="ph ph-chat-centered-dots text-green-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">情绪调节卡片</h3>
          </div>

          <!-- 行为实验指南 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="behaviorExperimentPage">
            <div class="w-14 h-14 rounded-full bg-purple-100 flex items-center justify-center mb-3">
             <i class="ph ph-flask text-purple-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">行为实验指南</h3>
          </div>

          <!-- 冥想/正念练习 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="mindfulnessPage">
            <div class="w-14 h-14 rounded-full bg-yellow-100 flex items-center justify-center mb-3">
            <i class="ph ph-headphones text-yellow-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">冥想/正念练习</h3>
          </div>
        </div>

        <!-- 最近记录（动态） -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">最近记录</h3>
            <button class="text-primary text-sm flex items-center" data-target="myRecordsPage">
              查看全部 <i class="fa fa-angle-right ml-1"></i>
            </button>
          </div>
          <div id="recentList" class="space-y-3"></div>
        </div>

        <!-- 新解锁徽章（动态） -->
        <div id="badgeBanner" class="hidden bg-gradient-to-r from-primary to-accent rounded-xl p-5 text-white mb-6">
          <div class="flex items-start justify-between">
            <div>
              <h3 class="text-lg font-semibold mb-1">恭喜解锁新徽章！</h3>
              <p id="badgeBannerText" class="text-sm opacity-90 mb-3"></p>
              <button class="bg-white text-primary text-sm px-3 py-1.5 rounded-full font-medium" data-target="myBadgesPage">
                查看我的徽章
              </button>
            </div>
            <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
              <i class="fa fa-star text-2xl"></i>
            </div>
          </div>
        </div>

        <!-- 身体中立理念推荐 -->
        <div>
          <h3 class="text-lg font-semibold mb-4">身体中立理念</h3>
          <div id="recommendList" class="space-y-4">
            <div class="glass-card rounded-xl overflow-hidden card-shadow">
              <img src="https://picsum.photos/400/200?random=33" alt="身体中立入门" class="w-full h-40 object-cover">
              <div class="p-4">
                <h4 class="font-semibold mb-1">身体中立入门</h4>
                <p class="text-sm text-gray-500 mb-3 line-clamp-2">从功能与健康角度看待身体，关注身体能做什么而不是看起来如何</p>
                <div class="flex items-center justify-between">
                  <span class="text-xs text-gray-400">2 分钟阅读</span>
                </div>
              </div>
            </div>
            <div class="glass-card rounded-xl overflow-hidden card-shadow">
              <img src="https://picsum.photos/400/200?random=34" alt="正念饮食" class="w-full h-40 object-cover">
              <div class="p-4">
                <h4 class="font-semibold mb-1">正念饮食 5 步</h4>
                <p class="text-sm text-gray-500 mb-3 line-clamp-2">慢一点，和味道好好相处，培养健康的饮食观念</p>
                <div class="flex items-center justify-between">
                  <span class="text-xs text-gray-400">3 分钟阅读</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 身心轻测评 -->
    <section id="assessmentPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">身心轻测评</h2>
          <p class="text-gray-500 text-sm">9 题 5 级量表 + BMI & 主观感受，生成个性化建议</p>
        </div>

        <!-- BMI + 主观感受 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">基础自评</h3>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm text-gray-600 mb-1">身高（cm）</label>
              <input id="heightInput" type="number" min="80" max="230" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="例如 165" />
            </div>
            <div>
              <label class="block text-sm text-gray-600 mb-1">体重（kg）</label>
              <input id="weightInput" type="number" min="20" max="250" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="例如 55" />
            </div>
          </div>
          <div class="mt-3">
            <label class="block text-sm text-gray-600 mb-1">此刻对身体的主观感受</label>
            <select id="bodyFeel" class="w-full p-3 border border-gray-200 rounded-lg">
              <option value="">请选择</option>
              <option value="舒适">舒适</option>
              <option value="紧绷">紧绷</option>
              <option value="疲惫">疲惫</option>
              <option value="不自信">不自信</option>
            </select>
          </div>
          <div class="mt-3 text-sm text-gray-600">
            <span id="bmiText" class="font-medium"></span>
          </div>
        </div>

        <!-- 9题量表 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">9 题量表（1=从不，5=总是）</h3>
          <div id="qList" class="space-y-3"></div>
        </div>

        <!-- 结果 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <button id="btnAssess" class="btn-primary"><i class="fa fa-check mr-2"></i>提交并生成建议</button>
          <div id="lightResult" class="hidden mt-4 border border-gray-100 rounded-lg p-4 bg-gray-50">
            <div id="lightSummary" class="mb-3 text-sm font-medium"></div>
            <p class="text-sm text-gray-600 mb-2">建议 & 今日小任务：</p>
            <ul id="lightAdvice" class="list-disc pl-5 space-y-1 text-sm"></ul>
          </div>
        </div>

        <!-- 专业测评入口 -->
        <div class="glass-card rounded-xl p-5 card-shadow">
          <h3 class="text-lg font-semibold mb-3">专业测评</h3>
          <p class="text-sm text-gray-600 mb-3">
            30 题专业量表，基于BSQ-34（身体形象）、PHQ-9（抑郁）、GAD-7（焦虑）等国际常用心理量表，
            结合身体中立性理念改编设计，多维度帮助用户科学觉察身心状态。
          </p>
          <button id="btnProAssess" class="w-full py-3 bg-secondary text-white rounded-lg font-medium">
            <i class="fa fa-clipboard-list mr-2"></i>开始专业测评（30题）
          </button>
          <div id="proResult" class="hidden mt-4 border border-gray-100 rounded-lg p-4 bg-gray-50">
            <div id="proSummary" class="mb-3 text-sm font-medium"></div>
            <p class="text-sm text-gray-600 mb-2">专属小计划：</p>
            <ul id="proPlan" class="list-disc pl-5 space-y-1 text-sm"></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 自动思维记录 -->
    <section id="thoughtRecordPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">自动思维记录</h2>
          <p class="text-gray-500 text-sm">记录并分析你的想法与情绪反应（聚焦身材/自我评价/社交媒体等）</p>
        </div>

        <!-- 捕捉 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">捕捉</h3>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">情境</label>
            <select id="trContext" class="w-full p-3 border border-gray-200 rounded-lg">
              <option value="">请选择或输入情境</option>
              <option>外貌被评价</option>
              <option>社交媒体对比</option>
              <option>体重波动</option>
              <option>穿衣不自信</option>
              <option>饮食控制失控</option>
              <option>自我怀疑</option>
              <option>家庭沟通</option>
              <option>其他（请在下方输入）</option>
            </select>
            <input id="trContextCustom" type="text" placeholder="如选择'其他'，请在此输入具体情境" class="w-full mt-2 p-3 border border-gray-200 rounded-lg" />
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">当时的想法</label>
            <textarea id="trThought" placeholder="请描述你当时的想法..." rows="4" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">证据（支持/反对）</label>
            <textarea id="trEvidence" placeholder="有没有证据支持或反驳这个想法？" rows="3" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-medium text-gray-700">情绪强度</label>
              <span id="emotionScore" class="text-primary font-semibold">5</span>
            </div>
            <input id="trEmotion" type="range" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary" oninput="document.getElementById('emotionScore').textContent = this.value" />
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>轻微</span><span>中等</span><span>强烈</span>
            </div>
          </div>
        </div>

        <!-- 操作 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6 space-y-3">
          <button id="btnSaveTR" class="btn-primary"><i class="fa fa-save mr-2"></i>保存记录</button>
          <div class="grid grid-cols-2 gap-3">
            <button id="btnExportCSV" class="py-2 border border-primary text-primary rounded-lg font-medium text-sm"><i class="fa fa-table mr-1"></i>导出 CSV</button>
            <button id="btnPrint" class="py-2 border border-gray-300 text-gray-700 rounded-lg font-medium text-sm"><i class="fa fa-file-pdf-o mr-1"></i>打印为 PDF</button>
          </div>
        </div>

        <!-- 示例输出（改为动态最近一次） -->
        <div class="glass-card rounded-xl p-5 card-shadow">
          <h3 class="text-lg font-semibold mb-4">最近一次记录</h3>
          <div id="trPreview" class="border border-gray-100 rounded-lg p-4 bg-gray-50 text-sm text-gray-700">
            暂无记录，保存后会显示预览。
          </div>
        </div>
      </div>
    </section>

    <!-- 情绪调节卡片 -->
    <section id="emotionRegulationPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">情绪调节卡片</h2>
          <p class="text-gray-500 text-sm">通过简单练习，缓解焦虑、重获平衡</p>
        </div>

        <!-- 轮播容器 -->
        <div class="relative mb-8">
          <div class="carousel-container overflow-x-auto scrollbar-hide pb-4">
            <div class="carousel-track flex space-x-4 min-w-max px-1">
              <!-- 卡片 1：深呼吸 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="deepBreath">
                <div class="h-36 bg-blue-50 relative">
                  <img src="https://picsum.photos/300/200?random=13" alt="深呼吸练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">深呼吸练习</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">4-2-6 呼吸：吸气 4 秒 - 停 2 秒 - 呼气 6 秒，重复 5–10 次。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 2：五感觉察 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0 opacity-90" data-card="fiveSenses">
                <div class="h-36 bg-green-50 relative">
                  <img src="https://picsum.photos/300/200?random=14" alt="五感觉察练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">五感觉察</h3>
                  </div>
                  <div class="absolute top-3 right-3 hidden done-sticker bg-green-500 text-white text-xs px-2 py-1 rounded-full">已完成</div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">说出你看到/摸到/听到/闻到/尝到的 5-4-3-2-1 样东西。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 3：正念饮食 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="mindfulEating">
                <div class="h-36 bg-yellow-50 relative">
                  <img src="https://picsum.photos/300/200?random=15" alt="正念饮食练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">正念饮食</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">选一颗葡萄干或一小块食物，慢慢观察、嗅闻、品尝，细嚼慢咽。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 4：情绪命名 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="nameEmotion">
                <div class="h-36 bg-purple-50 relative">
                  <img src="https://picsum.photos/300/200?random=16" alt="情绪命名练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">情绪命名</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">停下 30 秒，辨认情绪并命名：焦虑/紧绷/羞愧/不安…接纳它的存在。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- 指示器 -->
          <div class="flex justify-center mt-4 space-x-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-primary"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
          </div>
        </div>

        <!-- 练习统计（动态） -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">练习进度</h3>
          <div class="flex justify-between items-center mb-4">
            <div>
              <p class="text-sm text-gray-500">本周已完成</p>
              <p id="statWeek" class="text-xl font-bold">0/7</p>
            </div>
            <div class="w-16 h-16 rounded-full border-4 border-primary/20 flex items-center justify-center">
              <div class="text-center">
                <p class="text-xs text-gray-500">连续天数</p>
                <p id="statStreak" class="text-lg font-bold text-primary">0</p>
              </div>
            </div>
            <div>
              <p class="text-sm text-gray-500">总完成次数</p>
              <p id="statTotal" class="text-xl font-bold">0</p>
            </div>
          </div>
          <div class="w-full bg-gray-100 rounded-full h-2.5">
            <div id="statBar" class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
          </div>
        </div>

        <!-- 相关推荐（动态） -->
        <div>
          <h3 class="text-lg font-semibold mb-4">相关推荐</h3>
          <div id="emotionRecs" class="space-y-4"></div>
        </div>
      </div>
    </section>

    <!-- 行为实验指南 -->
    <section id="behaviorExperimentPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">行为实验指南</h2>
          <p class="text-gray-500 text-sm">用小实验验证焦虑性信念，获得新证据</p>
        </div>

        <!-- 说明 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-3">什么是行为实验？</h3>
          <div class="prose prose-sm text-gray-700">
            <p>行为实验是 CBT 的核心技术：设计并执行小型、低风险的行动，验证"我担心的事是否真的会发生"。</p>
            <ul class="list-disc pl-5 space-y-1 mt-1">
              <li>发现认知与现实的差距</li>
              <li>收集反证，挑战不合理信念</li>
              <li>通过体验形成新的、更健康的认知</li>
            </ul>
          </div>
        </div>

        <!-- 记录模板 -->
        <!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>MindFit - 身心焦虑自助工具</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" href="mindfit-style.css">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#0d9488",
            secondary: "#10B981",
            accent: "#6366f1",
            neutral: "#F3F4F6",
            dark: "#1F2937",
            light: "#F9FAFB",
          },
          fontFamily: {
            sans: ["PingFang SC", "Helvetica Neue", "Arial", "sans-serif"],
          },
        },
      },
    };
  </script>
</head>

<body class="bg-gray-50 font-sans text-dark min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="fixed top-0 left-0 right-0 glass-card shadow-sm z-50">
    <div class="flex items-center justify-between px-4 py-3">
      <div class="flex items-center">
        <button id="backBtn" class="p-2 text-gray-500 hover:text-primary transition-smooth">
          <i class="fa fa-arrow-left text-lg"></i>
        </button>
        <h1 id="pageTitle" class="text-xl font-medium ml-2">MindFit 身心管理</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button class="p-2 text-gray-500 hover:text-primary transition-smooth" data-target="myRecordsPage">
          <i class="fa fa-list-alt text-lg"></i>
        </button>
        <button class="p-2 text-gray-500 hover:text-primary transition-smooth" data-target="myBadgesPage">
          <i class="fa fa-star-o text-lg"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- 提示 Toast -->
  <div id="toast" class="fixed left-1/2 -translate-x-1/2 top-16 z-[60] hidden">
    <div class="bg-gray-900 text-white text-sm px-3 py-2 rounded-md shadow-lg"></div>
  </div>

  <!-- 主内容区 -->
  <main class="pt-16 pb-20 min-h-screen">
    <!-- 首页 -->
    <section id="homePage" class="page active">
      <div class="px-4 py-6">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-[clamp(1.5rem,3vw,1.8rem)] font-bold">身心焦虑自助工具</h2>
          <div class="flex items-center">
            <span class="text-sm text-gray-500 mr-2">我的进度</span>
            <div class="w-28 h-2 bg-gray-200 rounded-full overflow-hidden">
              <i class="ph ph-chart-line text-slate-500 text-2xl"></i>
              <div id="progressBar" class="h-full bg-primary rounded-full" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <!-- 功能卡片网格 -->
        <div class="grid grid-cols-2 gap-4 mb-8">
          <!-- 轻测评 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="assessmentPage">
            <div class="w-14 h-14 rounded-full bg-pink-100 flex items-center justify-center mb-3">
             <i class="ph ph-heartbeat text-pink-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">身心轻测评</h3>
          </div>

          <!-- 自动思维记录 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="thoughtRecordPage">
            <div class="w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center mb-3">
             <i class="ph ph-pencil-simple text-blue-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">自动思维记录</h3>
          </div>

          <!-- 情绪调节卡片 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="emotionRegulationPage">
            <div class="w-14 h-14 rounded-full bg-green-100 flex items-center justify-center mb-3">
             <i class="ph ph-chat-centered-dots text-green-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">情绪调节卡片</h3>
          </div>

          <!-- 行为实验指南 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="behaviorExperimentPage">
            <div class="w-14 h-14 rounded-full bg-purple-100 flex items-center justify-center mb-3">
             <i class="ph ph-flask text-purple-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">行为实验指南</h3>
          </div>

          <!-- 冥想/正念练习 -->
          <div class="feature-card glass-card rounded-xl p-5 card-shadow flex flex-col items-center justify-center transition-smooth hover:shadow-lg hover:-translate-y-1 cursor-pointer" data-target="mindfulnessPage">
            <div class="w-14 h-14 rounded-full bg-yellow-100 flex items-center justify-center mb-3">
            <i class="ph ph-headphones text-yellow-500 text-2xl"></i>
            </div>
            <h3 class="text-base font-medium text-center">冥想/正念练习</h3>
          </div>
        </div>

        <!-- 最近记录（动态） -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">最近记录</h3>
            <button class="text-primary text-sm flex items-center" data-target="myRecordsPage">
              查看全部 <i class="fa fa-angle-right ml-1"></i>
            </button>
          </div>
          <div id="recentList" class="space-y-3"></div>
        </div>

        <!-- 新解锁徽章（动态） -->
        <div id="badgeBanner" class="hidden bg-gradient-to-r from-primary to-accent rounded-xl p-5 text-white mb-6">
          <div class="flex items-start justify-between">
            <div>
              <h3 class="text-lg font-semibold mb-1">恭喜解锁新徽章！</h3>
              <p id="badgeBannerText" class="text-sm opacity-90 mb-3"></p>
              <button class="bg-white text-primary text-sm px-3 py-1.5 rounded-full font-medium" data-target="myBadgesPage">
                查看我的徽章
              </button>
            </div>
            <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
              <i class="fa fa-star text-2xl"></i>
            </div>
          </div>
        </div>

        <!-- 身体中立理念推荐 -->
        <div>
          <h3 class="text-lg font-semibold mb-4">身体中立理念</h3>
          <div id="recommendList" class="space-y-4">
            <div class="glass-card rounded-xl overflow-hidden card-shadow">
              <img src="https://picsum.photos/400/200?random=33" alt="身体中立入门" class="w-full h-40 object-cover">
              <div class="p-4">
                <h4 class="font-semibold mb-1">身体中立入门</h4>
                <p class="text-sm text-gray-500 mb-3 line-clamp-2">从功能与健康角度看待身体，关注身体能做什么而不是看起来如何</p>
                <div class="flex items-center justify-between">
                  <span class="text-xs text-gray-400">2 分钟阅读</span>
                </div>
              </div>
            </div>
            <div class="glass-card rounded-xl overflow-hidden card-shadow">
              <img src="https://picsum.photos/400/200?random=34" alt="正念饮食" class="w-full h-40 object-cover">
              <div class="p-4">
                <h4 class="font-semibold mb-1">正念饮食 5 步</h4>
                <p class="text-sm text-gray-500 mb-3 line-clamp-2">慢一点，和味道好好相处，培养健康的饮食观念</p>
                <div class="flex items-center justify-between">
                  <span class="text-xs text-gray-400">3 分钟阅读</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 身心轻测评 -->
    <section id="assessmentPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">身心轻测评</h2>
          <p class="text-gray-500 text-sm">9 题 5 级量表 + BMI & 主观感受，生成个性化建议</p>
        </div>

        <!-- BMI + 主观感受 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">基础自评</h3>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm text-gray-600 mb-1">身高（cm）</label>
              <input id="heightInput" type="number" min="80" max="230" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="例如 165" />
            </div>
            <div>
              <label class="block text-sm text-gray-600 mb-1">体重（kg）</label>
              <input id="weightInput" type="number" min="20" max="250" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="例如 55" />
            </div>
          </div>
          <div class="mt-3">
            <label class="block text-sm text-gray-600 mb-1">此刻对身体的主观感受</label>
            <select id="bodyFeel" class="w-full p-3 border border-gray-200 rounded-lg">
              <option value="">请选择</option>
              <option value="舒适">舒适</option>
              <option value="紧绷">紧绷</option>
              <option value="疲惫">疲惫</option>
              <option value="不自信">不自信</option>
            </select>
          </div>
          <div class="mt-3 text-sm text-gray-600">
            <span id="bmiText" class="font-medium"></span>
          </div>
        </div>

        <!-- 9题量表 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">9 题量表（1=从不，5=总是）</h3>
          <div id="qList" class="space-y-3"></div>
        </div>

        <!-- 结果 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <button id="btnAssess" class="btn-primary"><i class="fa fa-check mr-2"></i>提交并生成建议</button>
          <div id="lightResult" class="hidden mt-4 border border-gray-100 rounded-lg p-4 bg-gray-50">
            <div id="lightSummary" class="mb-3 text-sm font-medium"></div>
            <p class="text-sm text-gray-600 mb-2">建议 & 今日小任务：</p>
            <ul id="lightAdvice" class="list-disc pl-5 space-y-1 text-sm"></ul>
          </div>
        </div>

        <!-- 专业测评入口 -->
        <div class="glass-card rounded-xl p-5 card-shadow">
          <h3 class="text-lg font-semibold mb-3">专业测评</h3>
          <p class="text-sm text-gray-600 mb-3">
            30 题专业量表，基于BSQ-34（身体形象）、PHQ-9（抑郁）、GAD-7（焦虑）等国际常用心理量表，
            结合身体中立性理念改编设计，多维度帮助用户科学觉察身心状态。
          </p>
          <button id="btnProAssess" class="w-full py-3 bg-secondary text-white rounded-lg font-medium">
            <i class="fa fa-clipboard-list mr-2"></i>开始专业测评（30题）
          </button>
          <div id="proResult" class="hidden mt-4 border border-gray-100 rounded-lg p-4 bg-gray-50">
            <div id="proSummary" class="mb-3 text-sm font-medium"></div>
            <p class="text-sm text-gray-600 mb-2">专属小计划：</p>
            <ul id="proPlan" class="list-disc pl-5 space-y-1 text-sm"></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 自动思维记录 -->
    <section id="thoughtRecordPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">自动思维记录</h2>
          <p class="text-gray-500 text-sm">记录并分析你的想法与情绪反应（聚焦身材/自我评价/社交媒体等）</p>
        </div>

        <!-- 捕捉 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">捕捉</h3>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">情境</label>
            <select id="trContext" class="w-full p-3 border border-gray-200 rounded-lg">
              <option value="">请选择或输入情境</option>
              <option>外貌被评价</option>
              <option>社交媒体对比</option>
              <option>体重波动</option>
              <option>穿衣不自信</option>
              <option>饮食控制失控</option>
              <option>自我怀疑</option>
              <option>家庭沟通</option>
              <option>其他（请在下方输入）</option>
            </select>
            <input id="trContextCustom" type="text" placeholder="如选择'其他'，请在此输入具体情境" class="w-full mt-2 p-3 border border-gray-200 rounded-lg" />
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">当时的想法</label>
            <textarea id="trThought" placeholder="请描述你当时的想法..." rows="4" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">证据（支持/反对）</label>
            <textarea id="trEvidence" placeholder="有没有证据支持或反驳这个想法？" rows="3" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="">
            <div class="flex items-center justify-between mb-2">
              <label class="block text-sm font-medium text-gray-700">情绪强度</label>
              <span id="emotionScore" class="text-primary font-semibold">5</span>
            </div>
            <input id="trEmotion" type="range" min="1" max="10" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary" oninput="document.getElementById('emotionScore').textContent = this.value" />
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>轻微</span><span>中等</span><span>强烈</span>
            </div>
          </div>
        </div>

        <!-- 操作 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6 space-y-3">
          <button id="btnSaveTR" class="btn-primary"><i class="fa fa-save mr-2"></i>保存记录</button>
          <div class="grid grid-cols-2 gap-3">
            <button id="btnExportCSV" class="py-2 border border-primary text-primary rounded-lg font-medium text-sm"><i class="fa fa-table mr-1"></i>导出 CSV</button>
            <button id="btnPrint" class="py-2 border border-gray-300 text-gray-700 rounded-lg font-medium text-sm"><i class="fa fa-file-pdf-o mr-1"></i>打印为 PDF</button>
          </div>
        </div>

        <!-- 示例输出（改为动态最近一次） -->
        <div class="glass-card rounded-xl p-5 card-shadow">
          <h3 class="text-lg font-semibold mb-4">最近一次记录</h3>
          <div id="trPreview" class="border border-gray-100 rounded-lg p-4 bg-gray-50 text-sm text-gray-700">
            暂无记录，保存后会显示预览。
          </div>
        </div>
      </div>
    </section>

    <!-- 情绪调节卡片 -->
    <section id="emotionRegulationPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">情绪调节卡片</h2>
          <p class="text-gray-500 text-sm">通过简单练习，缓解焦虑、重获平衡</p>
        </div>

        <!-- 轮播容器 -->
        <div class="relative mb-8">
          <div class="carousel-container overflow-x-auto scrollbar-hide pb-4">
            <div class="carousel-track flex space-x-4 min-w-max px-1">
              <!-- 卡片 1：深呼吸 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="deepBreath">
                <div class="h-36 bg-blue-50 relative">
                  <img src="https://picsum.photos/300/200?random=13" alt="深呼吸练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">深呼吸练习</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">4-2-6 呼吸：吸气 4 秒 - 停 2 秒 - 呼气 6 秒，重复 5–10 次。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 2：五感觉察 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0 opacity-90" data-card="fiveSenses">
                <div class="h-36 bg-green-50 relative">
                  <img src="https://picsum.photos/300/200?random=14" alt="五感觉察练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">五感觉察</h3>
                  </div>
                  <div class="absolute top-3 right-3 hidden done-sticker bg-green-500 text-white text-xs px-2 py-1 rounded-full">已完成</div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">说出你看到/摸到/听到/闻到/尝到的 5-4-3-2-1 样东西。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 3：正念饮食 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="mindfulEating">
                <div class="h-36 bg-yellow-50 relative">
                  <img src="https://picsum.photos/300/200?random=15" alt="正念饮食练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">正念饮食</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">选一颗葡萄干或一小块食物，慢慢观察、嗅闻、品尝，细嚼慢咽。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>

              <!-- 卡片 4：情绪命名 -->
              <div class="emotion-card glass-card rounded-xl overflow-hidden card-shadow w-72 flex-shrink-0" data-card="nameEmotion">
                <div class="h-36 bg-purple-50 relative">
                  <img src="https://picsum.photos/300/200?random=16" alt="情绪命名练习" class="w-full h-full object-cover opacity-70" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent flex items-end">
                    <h3 class="text-white text-lg font-semibold p-4">情绪命名</h3>
                  </div>
                </div>
                <div class="p-4">
                  <p class="text-sm text-gray-600 mb-4">停下 30 秒，辨认情绪并命名：焦虑/紧绷/羞愧/不安…接纳它的存在。</p>
                  <button class="complete-btn w-full py-2 border border-primary text-primary rounded-lg font-medium text-sm transition-smooth hover:bg-primary hover:text-white">
                    标记完成
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- 指示器 -->
          <div class="flex justify-center mt-4 space-x-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-primary"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-gray-300"></span>
          </div>
        </div>

        <!-- 练习统计（动态） -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-4">练习进度</h3>
          <div class="flex justify-between items-center mb-4">
            <div>
              <p class="text-sm text-gray-500">本周已完成</p>
              <p id="statWeek" class="text-xl font-bold">0/7</p>
            </div>
            <div class="w-16 h-16 rounded-full border-4 border-primary/20 flex items-center justify-center">
              <div class="text-center">
                <p class="text-xs text-gray-500">连续天数</p>
                <p id="statStreak" class="text-lg font-bold text-primary">0</p>
              </div>
            </div>
            <div>
              <p class="text-sm text-gray-500">总完成次数</p>
              <p id="statTotal" class="text-xl font-bold">0</p>
            </div>
          </div>
          <div class="w-full bg-gray-100 rounded-full h-2.5">
            <div id="statBar" class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
          </div>
        </div>

        <!-- 相关推荐（动态） -->
        <div>
          <h3 class="text-lg font-semibold mb-4">相关推荐</h3>
          <div id="emotionRecs" class="space-y-4"></div>
        </div>
      </div>
    </section>

    <!-- 行为实验指南 -->
    <section id="behaviorExperimentPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">行为实验指南</h2>
          <p class="text-gray-500 text-sm">用小实验验证焦虑性信念，获得新证据</p>
        </div>

        <!-- 说明 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-3">什么是行为实验？</h3>
          <div class="prose prose-sm text-gray-700">
            <p>行为实验是 CBT 的核心技术：设计并执行小型、低风险的行动，验证"我担心的事是否真的会发生"。</p>
            <ul class="list-disc pl-5 space-y-1 mt-1">
              <li>发现认知与现实的差距</li>
              <li>收集反证，挑战不合理信念</li>
              <li>通过体验形成新的、更健康的认知</li>
            </ul>
          </div>
        </div>

        <!-- 记录模板 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">实验记录</h3>
            <span class="text-xs bg-green-50 text-green-600 px-2 py-1 rounded-full">自动保存</span>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">我的担忧信念</label>
            <textarea id="bxBelief" rows="3" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="例如：如果我在朋友面前吃东西，他们会觉得我失控…"></textarea>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">小步尝试设计</label>
            <div class="space-y-3">
              <input id="bxStep1" type="text" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="第一步：例如，在熟悉的环境下与好友一起吃一小份点心…" />
              <input id="bxStep2" type="text" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="第二步：……" />
              <input id="bxStep3" type="text" class="w-full p-3 border border-gray-200 rounded-lg" placeholder="第三步：……" />
            </div>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">我预测会发生什么？</label>
            <textarea id="bxPredict" rows="2" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-2">实际结果记录</label>
            <textarea id="bxActual" rows="3" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <div class="mb-3">
            <label class="block text-sm font-medium text-gray-700 mb-2">结论与新的认识</label>
            <textarea id="bxLearn" rows="3" class="w-full p-3 border border-gray-200 rounded-lg"></textarea>
          </div>

          <button id="btnSaveBX" class="btn-primary"><i class="fa fa-save mr-2"></i>保存实验记录</button>
        </div>

        <!-- 历史实验（动态） -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">历史实验记录</h3>
            <button class="text-primary text-sm" id="btnViewAllBX">查看全部</button>
          </div>
          <div id="bxList" class="space-y-3"></div>
        </div>
      </div>
    </section>

    <!-- 冥想/正念练习 -->
    <section id="mindfulnessPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">冥想/正念练习</h2>
          <p class="text-gray-500 text-sm">3–5 分钟引导，随时进入平静</p>
        </div>

        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <div class="flex flex-col items-center">
            <audio id="audio" preload="none">
              <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg" />
            </audio>

            <div class="w-32 h-32 rounded-full bg-gradient-to-br from-purple-400 to-primary flex items-center justify-center mb-5">
              <i class="fa fa-play text-white text-3xl" id="playPauseIcon"></i>
            </div>

            <h3 class="text-lg font-semibold mb-1">3 分钟呼吸冥想</h3>
            <p class="text-sm text-gray-500 mb-5">如果音频加载慢，可仅用计时练习</p>

            <div class="w-full mb-4">
              <div class="flex justify-between text-xs text-gray-500 mb-1">
                <span id="currentTime">00:00</span>
                <span id="totalTime">03:00</span>
              </div>
              <input id="seekBar" type="range" min="0" max="180" value="0" class="w-full h-1.5 bg-gray-200 rounded-lg accent-primary" />
            </div>

            <div class="flex items-center justify-between w-full max-w-xs">
              <button id="btnStepBack" class="text-gray-500 hover:text-primary transition-smooth">
                <i class="fa fa-step-backward"></i>
              </button>
              <button id="playPauseBtn" class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center">
                <i class="fa fa-play"></i>
              </button>
              <button id="btnStepForward" class="text-gray-500 hover:text-primary transition-smooth">
                <i class="fa fa-step-forward"></i>
              </button>
            </div>

            <div class="w-full mt-5 flex items-center">
              <i class="fa fa-volume-up text-gray-500 mr-2"></i>
              <input id="volumeBar" type="range" min="0" max="1" step="0.01" value="0.7" class="w-full h-1 bg-gray-200 rounded-lg accent-primary" />
            </div>

            <button id="btnCache" class="mt-5 text-sm text-primary flex items-center">
              <i class="fa fa-download mr-1"></i> 记为已缓存（离线提示）
            </button>
          </div>
        </div>

        <!-- 文字指导 -->
        <div class="glass-card rounded-xl p-5 card-shadow mb-6">
          <h3 class="text-lg font-semibold mb-3">练习指导</h3>
          <p class="text-sm text-gray-600">找一个安静、舒适的环境，保持自然呼吸。当注意力走神时，温和地把它带回呼吸，不评判自己。</p>
          <button id="startPracticeBtn" class="w-full mt-5 py-3 bg-primary text-white rounded-lg font-medium">
            开始计时练习（3 分钟）
          </button>
        </div>

        <!-- 更多练习 -->
        <div>
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">更多练习</h3>
            <button class="text-primary text-sm">查看全部</button>
          </div>
          <div class="space-y-3">
            <div class="glass-card rounded-lg p-4 card-shadow flex items-center">
              <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fa fa-headphones text-secondary"></i>
              </div>
              <div class="flex-grow">
                <h4 class="font-medium">5 分钟身体扫描</h4>
                <p class="text-xs text-gray-500">关注身体感受，释放紧张</p>
              </div>
              <div class="flex-shrink-0">
                <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full mr-2">5:00</span>
                <button class="text-primary"><i class="fa fa-play-circle-o"></i></button>
              </div>
            </div>
            <div class="glass-card rounded-lg p-4 card-shadow flex items-center">
              <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fa fa-headphones text-accent"></i>
              </div>
              <div class="flex-grow">
                <h4 class="font-medium">睡前放松冥想</h4>
                <p class="text-xs text-gray-500">缓解入睡困难</p>
              </div>
              <div class="flex-shrink-0">
                <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full mr-2">8:00</span>
                <button class="text-primary"><i class="fa fa-play-circle-o"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 我的记录 -->
    <section id="myRecordsPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">我的记录</h2>
          <p class="text-gray-500 text-sm">查看与管理你的所有记录</p>
        </div>

        <!-- 筛选 -->
        <div class="glass-card rounded-xl p-4 card-shadow mb-6">
          <div class="flex flex-wrap gap-2 mb-3">
            <button data-filter="all" class="filter-btn px-3 py-1.5 bg-primary text-white text-sm rounded-full">全部记录</button>
            <button data-filter="thought" class="filter-btn px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-full">自动思维</button>
            <button data-filter="emotion" class="filter-btn px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-full">情绪练习</button>
            <button data-filter="experiment" class="filter-btn px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-full">行为实验</button>
            <button data-filter="mindfulness" class="filter-btn px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-full">冥想</button>
            <button data-filter="assessment" class="filter-btn px-3 py-1.5 bg-gray-100 text-gray-600 text-sm rounded-full">测评</button>
          </div>
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <i class="fa fa-calendar text-gray-500 mr-2"></i>
              <span class="text-sm text-gray-600">最近 30 天</span>
            </div>
            <div class="space-x-2">
              <button id="btnExportAll" class="text-primary text-sm"><i class="fa fa-download mr-1"></i>导出所有 CSV</button>
              <button id="btnClearAll" class="text-red-500 text-sm"><i class="fa fa-trash-o mr-1"></i>清空所有数据</button>
            </div>
          </div>
        </div>

        <!-- 列表 -->
        <div id="recordList" class="space-y-3"></div>
      </div>
    </section>

    <!-- 我的徽章 -->
    <section id="myBadgesPage" class="page hidden">
      <div class="px-4 py-6">
        <div class="mb-6">
          <h2 class="text-xl font-bold mb-2">我的徽章</h2>
          <p class="text-gray-500 text-sm">记录你的坚持与进步</p>
        </div>

        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-4">已解锁</h3>
          <div id="badgeUnlocked" class="grid grid-cols-3 gap-4"></div>
        </div>

        <div>
          <h3 class="text-lg font-semibold mb-4">待解锁</h3>
          <div id="badgeLocked" class="grid grid-cols-3 gap-4"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- 底部导航 -->
  <footer class="fixed bottom-0 left-0 right-0 glass-card shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-40">
    <div class="flex justify-around items-center py-3">
      <button class="nav-btn flex flex-col items-center text-primary" data-target="homePage">
        <i class="fa fa-home text-lg mb-1"></i><span class="text-xs">首页</span>
      </button>
      <button class="nav-btn flex flex-col items-center text-gray-500" data-target="emotionRegulationPage">
        <i class="fa fa-heart text-lg mb-1"></i><span class="text-xs">练习</span>
      </button>
      <button class="nav-btn flex flex-col items-center text-gray-500" data-target="myRecordsPage">
        <i class="fa fa-book text-lg mb-1"></i><span class="text-xs">记录</span>
      </button>
      <button class="nav-btn flex flex-col items-center text-gray-500" data-target="myBadgesPage">
        <i class="fa fa-star-o text-lg mb-1"></i><span class="text-xs">徽章</span>
      </button>
    </div>
  </footer>

  <script src="mindfit-app.js"></script>
</body>
</html>
