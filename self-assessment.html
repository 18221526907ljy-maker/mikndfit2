<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>了解自己 - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#4A6157",
            secondary: "#F7F6F2", 
            accent: "#2E2E2E",
            mint: "#8FD9A8",
            light: "#FAFAFA",
            white: "#FFFFFF",
            content: "#444444",
            gray: "#666666",
            lightGray: "#777777",
          },
        },
      },
    };
  </script>
  
  <style>
    /* 页面加载动画 */
    .page-content {
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* 测评卡片样式 */
    .assessment-card {
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      cursor: pointer;
    }
    
    .assessment-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }

    .assessment-card:active {
      transform: translateY(-2px) scale(0.98);
      transition: all 0.15s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* Toast 样式 */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #4A6157, #8FD9A8);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      z-index: 1000;
      transform: translateX(120%);
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: 0 8px 32px rgba(74, 97, 87, 0.3);
    }

    .toast.show {
      transform: translateX(0);
    }
  </style>
</head>

<body class="bg-secondary font-sans min-h-screen">
  <!-- 顶部导航 -->
  <nav class="bg-white border-b border-gray-200 sticky top-0 z-50 backdrop-blur-md bg-white/90">
    <div class="max-w-4xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <a href="index.html" class="flex items-center text-primary hover:text-mint transition-all duration-300 group">
            <span class="mr-2 transition-transform group-hover:-translate-x-1">←</span>
            <span class="font-medium">返回首页</span>
          </a>
        </div>
        <div class="flex items-center space-x-2">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <i class="fa fa-heartbeat text-white text-sm"></i>
          </div>
          <span class="text-lg font-bold text-primary">MindFit</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Toast 提示 -->
  <div id="toast" class="toast">
    <div class="flex items-center">
      <span class="mr-2">✓</span>
      <span id="toastMessage"></span>
    </div>
  </div>

  <main class="max-w-4xl mx-auto px-4 py-8">
    <div class="page-content">
      
      <!-- 页面标题 -->
      <div class="text-center mb-8">
        <h1 class="text-2xl md:text-3xl font-bold text-primary mb-4">了解自己</h1>
        <p class="text-content text-lg">通过科学测评，更好地认知当下的自己</p>
      </div>

      <!-- 测评选项 -->
      <div class="grid gap-6 mb-8">
        
        <!-- BMI身体测评 -->
        <div class="assessment-card bg-white rounded-2xl p-6 md:p-8 shadow-sm" onclick="startBMIAssessment()">
          <div class="flex items-center">
            <div class="w-16 h-16 rounded-2xl bg-blue-100 flex items-center justify-center mr-6">
              <i class="fa fa-balance-scale text-blue-500 text-2xl"></i>
            </div>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-primary mb-2">BMI 身体测评</h3>
              <p class="text-content mb-3">了解基础身体指标，建立健康的身体认知</p>
              <div class="flex items-center text-sm text-gray-500">
                <i class="fa fa-clock-o mr-2"></i>
                <span>约 2-3 分钟</span>
                <span class="mx-2">•</span>
                <span>基础信息评估</span>
              </div>
            </div>
            <i class="fa fa-chevron-right text-gray-300 text-xl"></i>
          </div>
        </div>

        <!-- 身材焦虑自评 -->
        <div class="assessment-card bg-white rounded-2xl p-6 md:p-8 shadow-sm" onclick="startAnxietyAssessment()">
          <div class="flex items-center">
            <div class="w-16 h-16 rounded-2xl bg-pink-100 flex items-center justify-center mr-6">
              <i class="fa fa-heart text-pink-500 text-2xl"></i>
            </div>
            <div class="flex-1">
              <h3 class="text-xl font-bold text-primary mb-2">身材焦虑自评</h3>
              <p class="text-content mb-3">通过9道题目，评估你对身体形象的感受程度</p>
              <div class="flex items-center text-sm text-gray-500">
                <i class="fa fa-clock-o mr-2"></i>
                <span>约 3-5 分钟</span>
                <span class="mx-2">•</span>
                <span>9题量表测评</span>
              </div>
            </div>
            <i class="fa fa-chevron-right text-gray-300 text-xl"></i>
          </div>
        </div>



      </div>

      <!-- 最近测评记录 -->
      <div class="bg-white rounded-2xl p-6 shadow-sm mb-6">
        <h4 class="text-lg font-semibold text-primary mb-4">最近测评记录</h4>
        <div id="recentAssessments" class="space-y-3">
          <div class="text-center py-8 text-gray-500">
            <i class="fa fa-clipboard text-4xl mb-4"></i>
            <p>暂无测评记录</p>
            <p class="text-sm">完成测评后，记录会显示在这里</p>
          </div>
        </div>
      </div>

      <!-- 温馨提示 -->
      <div class="bg-gradient-to-r from-primary/5 to-mint/5 rounded-2xl p-6 border border-primary/10">
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center mr-4 flex-shrink-0">
            <i class="fa fa-lightbulb-o text-primary"></i>
          </div>
          <div>
            <h4 class="font-semibold text-primary mb-2">温馨提示</h4>
            <ul class="text-sm text-content space-y-1">
              <li>• 测评结果仅供参考，不能替代专业医疗建议</li>
              <li>• 请在安静的环境中完成测评，确保结果准确性</li>
              <li>• 建议定期进行测评，跟踪自己的身心状态变化</li>
              <li>• 如有严重的身心健康问题，请及时咨询专业人士</li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </main>

  <script>
    // Toast 提示功能
    function showToast(message) {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      toastMessage.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // 格式化时间为精准时间
    function formatTime(timestamp) {
      const date = new Date(timestamp);
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      const hours = String(date.getHours()).padStart(2, '0');
      const minutes = String(date.getMinutes()).padStart(2, '0');
      
      return `${year}-${month}-${day} ${hours}:${minutes}`;
    }

    // 加载并显示最近的测评记录
    function loadRecentAssessments() {
      try {
        // 从localStorage获取测评记录
        const bmiRecords = JSON.parse(localStorage.getItem('bmi_assessments') || '[]');
        const anxietyRecords = JSON.parse(localStorage.getItem('anxiety_assessments') || '[]');
        
        // 合并所有记录并按时间排序
        const allRecords = [
          ...bmiRecords.map(r => ({...r, type: 'BMI测评', icon: 'fa-balance-scale', color: 'text-blue-500'})),
          ...anxietyRecords.map(r => ({...r, type: '身材焦虑自评', icon: 'fa-heart', color: 'text-pink-500'}))
        ].sort((a, b) => b.timestamp - a.timestamp).slice(0, 5);

        const container = document.getElementById('recentAssessments');
        
        if (allRecords.length === 0) {
          container.innerHTML = `
            <div class="text-center py-8 text-gray-500">
              <i class="fa fa-clipboard text-4xl mb-4"></i>
              <p>暂无测评记录</p>
              <p class="text-sm">完成测评后，记录会显示在这里</p>
            </div>
          `;
          return;
        }

        container.innerHTML = allRecords.map(record => `
          <div class="flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0">
            <div class="flex items-center">
              <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center mr-3">
                <i class="fa ${record.icon} ${record.color}"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800">${record.type}</div>
                <div class="text-sm text-gray-500">${formatTime(record.timestamp)}</div>
              </div>
            </div>
            <div class="text-sm text-gray-600">
              ${record.score ? `得分: ${record.score}` : '已完成'}
            </div>
          </div>
        `).join('');

      } catch (error) {
        console.error('加载测评记录失败:', error);
      }
    }

    // 开始BMI测评
    function startBMIAssessment() {
      showToast('准备开始BMI测评...');
      setTimeout(() => {
        window.location.href = 'BMI测评页面.html';
      }, 500);
    }

    // 开始身材焦虑测评
    function startAnxietyAssessment() {
      showToast('准备开始身材焦虑自评...');
      setTimeout(() => {
        window.location.href = 'assessment-test.html?type=anxiety';
      }, 500);
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
      loadRecentAssessments();
      
      // 添加键盘导航支持
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          window.location.href = 'index.html';
        }
      });
    });

    // 定期更新测评记录显示
    setInterval(loadRecentAssessments, 30000); // 每30秒更新一次
  </script>
<!-- MindFit 数据管理器 -->
<script src="js/data-manager.js"></script>

</body>
</html>

