<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‡ªæˆ‘æ…ˆæ‚²ç»ƒä¹  - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }
    .heart-pulse { animation: heartbeat 1.5s ease-in-out infinite; }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      10%, 30% { transform: scale(1.1); }
      20%, 40% { transform: scale(1); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 min-h-screen">
  
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-50">
    <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="daily_practice.html" class="text-amber-600 hover:text-amber-700">
        <i class="fas fa-arrow-left mr-2"></i>è¿”å›ç»ƒä¹ 
      </a>
      <h1 class="text-lg font-semibold text-gray-800">è‡ªæˆ‘æ…ˆæ‚²ç»ƒä¹ </h1>
      <div class="w-20"></div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    
    <!-- ç»ƒä¹ ä»‹ç» -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <div class="text-center mb-6">
        <div class="w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full mx-auto mb-4 flex items-center justify-center">
          <i class="fas fa-hand-holding-heart text-3xl text-white"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">æ¸©æŸ”å¯¹å¾…è‡ªå·±</h2>
        <p class="text-gray-600">å­¦ä¼šåƒå¯¹å¾…å¥½æœ‹å‹ä¸€æ ·å…³çˆ±è‡ªå·±</p>
      </div>

      <div class="grid md:grid-cols-3 gap-4 mb-6">
        <div class="text-center p-4 bg-amber-50 rounded-xl">
          <i class="fas fa-clock text-amber-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">å»ºè®®æ—¶é•¿</div>
          <div class="text-lg font-semibold text-gray-800">5-10åˆ†é’Ÿ</div>
        </div>
        <div class="text-center p-4 bg-yellow-50 rounded-xl">
          <i class="fas fa-star text-yellow-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">éš¾åº¦ç­‰çº§</div>
          <div class="text-lg font-semibold text-gray-800">ç®€å•</div>
        </div>
        <div class="text-center p-4 bg-orange-50 rounded-xl">
          <i class="fas fa-seedling text-orange-600 text-2xl mb-2"></i>
          <div class="text-sm text-gray-600">ä¸»è¦æ•ˆæœ</div>
          <div class="text-lg font-semibold text-gray-800">æå‡è‡ªæˆ‘æ¥çº³</div>
        </div>
      </div>

      <div class="bg-gradient-to-r from-amber-50 to-yellow-50 rounded-xl p-6 mb-6">
        <h3 class="font-semibold text-gray-800 mb-3 flex items-center">
          <i class="fas fa-info-circle text-amber-600 mr-2"></i>
          ä»€ä¹ˆæ˜¯è‡ªæˆ‘æ…ˆæ‚²?
        </h3>
        <p class="text-gray-700 text-sm leading-relaxed mb-3">
          è‡ªæˆ‘æ…ˆæ‚²(Self-Compassion)æ˜¯æŒ‡åœ¨é‡åˆ°å›°éš¾ã€å¤±è´¥æˆ–æ„Ÿåˆ°ä¸è¶³æ—¶,åƒå¯¹å¾…äº²å¯†æœ‹å‹ä¸€æ ·æ¸©æŸ”åœ°å¯¹å¾…è‡ªå·±,è€Œä¸æ˜¯ä¸¥å‰æ‰¹è¯„æˆ–è‹›è´£è‡ªå·±ã€‚
        </p>
        <div class="grid md:grid-cols-3 gap-3 text-sm">
          <div class="bg-white rounded-lg p-3">
            <div class="font-semibold text-amber-700 mb-1">è‡ªæˆ‘å–„å¾…</div>
            <div class="text-gray-600">æ¸©æŸ”è€Œéä¸¥å‰</div>
          </div>
          <div class="bg-white rounded-lg p-3">
            <div class="font-semibold text-amber-700 mb-1">å…±åŒäººæ€§</div>
            <div class="text-gray-600">æ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™</div>
          </div>
          <div class="bg-white rounded-lg p-3">
            <div class="font-semibold text-amber-700 mb-1">æ­£å¿µè§‰å¯Ÿ</div>
            <div class="text-gray-600">æ¥çº³è€Œéé€ƒé¿</div>
          </div>
        </div>
      </div>

      <div class="bg-amber-50 border-l-4 border-amber-400 rounded-r-xl p-4">
        <p class="text-sm text-gray-700">
          <i class="fas fa-quote-left text-amber-400 mr-2"></i>
          ç ”ç©¶è¡¨æ˜,è‡ªæˆ‘æ…ˆæ‚²ç»ƒä¹ å¯ä»¥æ˜¾è‘—é™ä½ç„¦è™‘å’ŒæŠ‘éƒæ°´å¹³,æå‡å¿ƒç†éŸ§æ€§å’Œç”Ÿæ´»æ»¡æ„åº¦ã€‚
          <i class="fas fa-quote-right text-amber-400 ml-2"></i>
        </p>
      </div>
    </div>

    <!-- é€‰æ‹©ç»ƒä¹ åœºæ™¯ -->
    <div class="bg-white rounded-3xl shadow-lg p-8 mb-8">
      <h3 class="text-xl font-semibold text-gray-800 mb-6 text-center">é€‰æ‹©ä½ çš„æƒ…å†µ</h3>
      <div class="grid md:grid-cols-2 gap-4">
        <button onclick="startPractice('struggle')" class="p-6 border-2 border-amber-400 bg-amber-50 rounded-2xl hover:bg-amber-100 transition-all text-left">
          <div class="flex items-center mb-3">
            <i class="fas fa-cloud-rain text-amber-600 text-2xl mr-3"></i>
            <div class="text-lg font-semibold text-gray-800">æ­£åœ¨ç»å†å›°éš¾</div>
          </div>
          <p class="text-sm text-gray-600">æ„Ÿåˆ°éš¾è¿‡ã€ç„¦è™‘æˆ–è‡ªè´£æ—¶ä½¿ç”¨</p>
          <div class="mt-3 text-xs text-amber-600 font-medium">æ¨è â­</div>
        </button>

        <button onclick="startPractice('daily')" class="p-6 border-2 border-gray-200 rounded-2xl hover:border-amber-400 hover:bg-amber-50 transition-all text-left">
          <div class="flex items-center mb-3">
            <i class="fas fa-sun text-amber-600 text-2xl mr-3"></i>
            <div class="text-lg font-semibold text-gray-800">æ—¥å¸¸ç»ƒä¹ </div>
          </div>
          <p class="text-sm text-gray-600">åŸ¹å…»è‡ªæˆ‘å…³çˆ±çš„ä¹ æƒ¯</p>
        </button>
      </div>
    </div>

  </main>

  <!-- ç»ƒä¹ æ¨¡æ€æ¡† -->
  <div id="practiceModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-8 max-h-[90vh] overflow-y-auto">
      
      <div class="text-center mb-8">
        <div class="heart-pulse w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full mx-auto mb-4 flex items-center justify-center">
          <i class="fas fa-heart text-2xl text-white"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">è‡ªæˆ‘æ…ˆæ‚²å†¥æƒ³</h3>
        <p id="scenarioTitle" class="text-gray-600"></p>
      </div>

      <!-- å¼•å¯¼æ­¥éª¤ -->
      <div id="guidedSteps" class="space-y-6 mb-8">
        <!-- åŠ¨æ€ç”Ÿæˆ -->
      </div>

      <!-- è®¡æ—¶å™¨ -->
      <div class="text-center mb-6">
        <div id="timeDisplay" class="text-3xl font-bold text-amber-600">5:00</div>
        <div class="text-sm text-gray-500 mt-1">ç»ƒä¹ æ—¶é—´</div>
      </div>

      <!-- æ…ˆæ‚²çŸ­è¯­ -->
      <div class="bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl p-6 mb-6">
        <h4 class="font-semibold text-gray-800 mb-4 text-center">æ…ˆæ‚²çŸ­è¯­(é»˜å¿µæˆ–è½»å£°æœ—è¯»)</h4>
        <div class="space-y-3 text-center">
          <p class="text-gray-700 italic">"æ„¿æˆ‘å¹³å®‰,è¿œç¦»å±é™©"</p>
          <p class="text-gray-700 italic">"æ„¿æˆ‘å¥åº·,èº«å¿ƒå®‰å¥½"</p>
          <p class="text-gray-700 italic">"æ„¿æˆ‘å¿«ä¹,å†…å¿ƒå–œæ‚¦"</p>
          <p class="text-gray-700 italic">"æ„¿æˆ‘è½»æ¾,è‡ªåœ¨ç”Ÿæ´»"</p>
        </div>
      </div>

      <!-- æ§åˆ¶æŒ‰é’® -->
      <div class="flex gap-3">
        <button id="pauseBtn" onclick="togglePause()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-pause mr-2"></i>æš‚åœ
        </button>
        <button onclick="completePractice()" class="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white py-3 rounded-xl font-medium transition-all">
          <i class="fas fa-check mr-2"></i>å®Œæˆç»ƒä¹ 
        </button>
      </div>

    </div>
  </div>

  <script>
    let timer = null;
    let totalSeconds = 300;
    let remainingSeconds = 300;
    let isPaused = false;
    let currentScenario = '';

    const scenarios = {
      struggle: {
        title: 'å›°éš¾æ—¶åˆ»çš„è‡ªæˆ‘å…³çˆ±',
        steps: [
          {
            icon: 'fa-hand-holding-heart',
            title: 'è§‰å¯Ÿç—›è‹¦',
            content: 'è½»è½»é—­ä¸Šçœ¼ç›,æ‰¿è®¤æ­¤åˆ»çš„ç—›è‹¦æˆ–å›°éš¾ã€‚ä¸éœ€è¦é€ƒé¿æˆ–å¦è®¤,åªæ˜¯æ¸©æŸ”åœ°è§‰å¯Ÿå®ƒçš„å­˜åœ¨ã€‚',
            time: 60
          },
          {
            icon: 'fa-users',
            title: 'å…±åŒäººæ€§',
            content: 'æé†’è‡ªå·±:ç—›è‹¦æ˜¯äººç”Ÿçš„ä¸€éƒ¨åˆ†,æ¯ä¸ªäººéƒ½ä¼šç»å†å›°éš¾ã€‚ä½ å¹¶ä¸å­¤å•,è¿™ä¸æ˜¯ä½ çš„é”™ã€‚',
            time: 90
          },
          {
            icon: 'fa-heart',
            title: 'è‡ªæˆ‘å–„å¾…',
            content: 'å°†æ‰‹æ”¾åœ¨å¿ƒå£,æ„Ÿå—æ¸©æš–ã€‚å¯¹è‡ªå·±è¯´:"è¿™å¾ˆéš¾,ä½†æˆ‘å€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…ã€‚"åƒå¯¹å¾…å¥½æœ‹å‹ä¸€æ ·å…³çˆ±è‡ªå·±ã€‚',
            time: 120
          },
          {
            icon: 'fa-om',
            title: 'æ…ˆæ‚²å†¥æƒ³',
            content: 'åœ¨å¿ƒä¸­é»˜å¿µæ…ˆæ‚²çŸ­è¯­,è®©è¿™äº›ç¥ç¦ç¯ç»•ç€ä½ ã€‚å…è®¸è‡ªå·±è¢«çˆ±å’Œå…³æ€€åŒ…å›´ã€‚',
            time: 30
          }
        ]
      },
      daily: {
        title: 'æ—¥å¸¸è‡ªæˆ‘æ…ˆæ‚²ç»ƒä¹ ',
        steps: [
          {
            icon: 'fa-smile',
            title: 'æ„Ÿæ©æ—¶åˆ»',
            content: 'æƒ³ä¸€æƒ³ä»Šå¤©ä½ åšå¾—å¥½çš„äº‹æƒ…,å“ªæ€•å¾ˆå°ã€‚ä¹Ÿè®¸æ˜¯æŒ‰æ—¶èµ·åºŠ,å®Œæˆäº†ä¸€é¡¹ä»»åŠ¡,æˆ–å¯¹ä»–äººå‹å–„ã€‚',
            time: 60
          },
          {
            icon: 'fa-leaf',
            title: 'æ¥çº³ä¸å®Œç¾',
            content: 'æ‰¿è®¤è‡ªå·±ä¹Ÿæœ‰ä¸è¶³å’Œå±€é™,è¿™å¾ˆæ­£å¸¸ã€‚å®Œç¾ä¸æ˜¯ç›®æ ‡,æˆé•¿æ‰æ˜¯ã€‚',
            time: 90
          },
          {
            icon: 'fa-heart',
            title: 'åŸ¹å…»å–„æ„',
            content: 'å°†æ‰‹æ”¾åœ¨å¿ƒå£,åœ¨å¿ƒä¸­å¯¹è‡ªå·±è¯´:"æˆ‘å€¼å¾—è¢«çˆ±å’Œå…³å¿ƒ,åŒ…æ‹¬æ¥è‡ªæˆ‘è‡ªå·±çš„çˆ±ã€‚"',
            time: 90
          },
          {
            icon: 'fa-seedling',
            title: 'è®¾å®šæ„å›¾',
            content: 'ä¸ºä»Šå¤©æˆ–æ˜å¤©è®¾å®šä¸€ä¸ªè‡ªæˆ‘å…³çˆ±çš„å°ç›®æ ‡,æ¯”å¦‚æŒ‰æ—¶ä¼‘æ¯ã€å¥½å¥½åƒé¥­,æˆ–ç»™è‡ªå·±ä¸€äº›ç‹¬å¤„æ—¶é—´ã€‚',
            time: 60
          }
        ]
      }
    };

    function startPractice(scenario) {
      currentScenario = scenario;
      const scenarioData = scenarios[scenario];
      
      document.getElementById('scenarioTitle').textContent = scenarioData.title;
      
      // ç”Ÿæˆæ­¥éª¤
      const stepsContainer = document.getElementById('guidedSteps');
      stepsContainer.innerHTML = scenarioData.steps.map((step, index) => `
        <div class="flex gap-4 p-4 bg-amber-50 rounded-xl">
          <div class="flex-shrink-0 w-12 h-12 bg-amber-100 text-amber-600 rounded-full flex items-center justify-center">
            <i class="fas ${step.icon} text-xl"></i>
          </div>
          <div class="flex-1">
            <h4 class="font-semibold text-gray-800 mb-2">${index + 1}. ${step.title}</h4>
            <p class="text-sm text-gray-600 leading-relaxed">${step.content}</p>
            <div class="text-xs text-amber-600 mt-2">çº¦ ${step.time} ç§’</div>
          </div>
        </div>
      `).join('');

      totalSeconds = scenarioData.steps.reduce((sum, step) => sum + step.time, 0);
      remainingSeconds = totalSeconds;
      
      document.getElementById('practiceModal').classList.remove('hidden');
      startTimer();
    }

    function startTimer() {
      timer = setInterval(() => {
        if (!isPaused && remainingSeconds > 0) {
          remainingSeconds--;
          updateDisplay();
          
          if (remainingSeconds === 0) {
            completePractice();
          }
        }
      }, 1000);
    }

    function updateDisplay() {
      const minutes = Math.floor(remainingSeconds / 60);
      const seconds = remainingSeconds % 60;
      document.getElementById('timeDisplay').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }

    function togglePause() {
      isPaused = !isPaused;
      const btn = document.getElementById('pauseBtn');
      btn.innerHTML = isPaused ? 
        '<i class="fas fa-play mr-2"></i>ç»§ç»­' : 
        '<i class="fas fa-pause mr-2"></i>æš‚åœ';
    }

    function completePractice() {
      clearInterval(timer);
      savePracticeRecord();
      alert('ğŸ’› ç»ƒä¹ å®Œæˆ!è®°ä½:ä½ å€¼å¾—è¢«æ¸©æŸ”å¯¹å¾…,å°¤å…¶æ˜¯è¢«è‡ªå·±ã€‚');
      document.getElementById('practiceModal').classList.add('hidden');
    }

    function savePracticeRecord() {
      const record = {
        id: Date.now(),
        title: 'è‡ªæˆ‘æ…ˆæ‚²ç»ƒä¹ ',
        category: 'mindful',
        duration: Math.floor((totalSeconds - remainingSeconds) / 60),
        date: new Date().toISOString(),
        timestamp: Date.now()
      };

      const history = JSON.parse(localStorage.getItem('practiceHistory') || '[]');
      history.push(record);
      localStorage.setItem('practiceHistory', JSON.stringify(history));
    }
  </script>

</body>
</html>
