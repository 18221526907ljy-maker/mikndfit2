<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ—¥å¸¸ç»ƒä¹  - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  
  <style>
    .practice-card {
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      cursor: pointer;
    }
    
    .practice-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }
     .page-content {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s forwards;
  }
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* âœ¨ æ–°å¢:ç»ƒä¹ å¡ç‰‡æ¸å…¥åŠ¨ç”» */
  .practice-card {
    opacity: 0;
    transform: scale(0.92) translateY(20px);
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  .practice-card.animate-in {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
    
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 14px;
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    
    .filter-btn.active {
      background: #4A6157;
      color: white;
    }
  </style>
</head>

<body class="bg-gray-50">
  
  <!-- Toast æç¤º -->
  <div id="toast" class="toast"></div>

  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
            <i class="fa fa-leaf text-white"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold text-primary">æ—¥å¸¸ç»ƒä¹ </h1>
            <p class="text-xs text-gray-500">é€‰æ‹©é€‚åˆå½“å‰åœºæ™¯çš„ç»ƒä¹ </p>
          </div>
        </div>
        <a href="index.html" class="text-gray-600 hover:text-primary">
          <i class="fa fa-home text-xl"></i>
        </a>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <div class="container page-content">

    <!-- ä»Šæ—¥è¿›åº¦å¡ç‰‡ -->
    <div class="bg-white rounded-2xl p-6 shadow-sm mb-8">
      ...
    </div>

    <!-- ç»ƒä¹ å¡ç‰‡ç½‘æ ¼ -->
    <div class="grid md:grid-cols-3 gap-6">
      <!-- æ¯ä¸ªç»ƒä¹ å¡ç‰‡ä¿æŒåŸæ · -->
      <div class="practice-card bg-white rounded-2xl p-6 shadow-sm" ...>
        ...
      </div>
    </div>

  </div>
</main>

      <!-- ä»Šæ—¥è¿›åº¦å¡ç‰‡ -->
      <div class="bg-white rounded-2xl p-6 shadow-sm mb-8">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-semibold text-primary">ä»Šæ—¥ç»ƒä¹ è¿›åº¦</h2>
          <span class="text-sm text-gray-500" id="todayDate"></span>
        </div>
        
        <div class="grid md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-3xl font-bold text-primary mb-2" id="streakDays">0</div>
            <div class="text-sm text-gray-600">è¿ç»­å¤©æ•°</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-mint mb-2" id="todayCompleted">0</div>
            <div class="text-sm text-gray-600">ä»Šæ—¥å®Œæˆ</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-accent mb-2" id="weekTotal">0</div>
            <div class="text-sm text-gray-600">æœ¬å‘¨æ€»è®¡</div>
          </div>
        </div>
      </div>

      <!-- ç»ƒä¹ åˆ†ç±» -->
      <div class="mb-8">
        <div class="flex flex-wrap gap-3 justify-center">
          <button class="filter-btn active px-6 py-2 rounded-full bg-primary text-white font-medium transition-all" data-category="all">
            å…¨éƒ¨ç»ƒä¹ 
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="body-neutral">
            ğŸŒ¿ èº«ä½“ä¸­ç«‹ä¸“å±
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="morning">
            ğŸŒ… æ™¨é—´å”¤é†’
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="work">
            ğŸ’¼ å·¥ä½œé—´éš™
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="emotion">
            ğŸ’« æƒ…ç»ªæ€¥æ•‘
          </button>
        </div>
      </div>

      <!-- ç»ƒä¹ å¡ç‰‡ç½‘æ ¼ -->
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto" id="practiceGrid">
        <!-- ç»ƒä¹ å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>

    </div>
  </main>

  <script>
    // âœ¨ æ–°å¢:é¡µé¢åŠ è½½æ—¶è§¦å‘å¡ç‰‡åŠ¨ç”»
  document.addEventListener('DOMContentLoaded', function() {
    // ç­‰å¾…èµ„æºåŠ è½½
    window.addEventListener('load', function() {
      setTimeout(() => {
        animatePracticeCards();
        updateDailyStats(); // åŸæœ‰çš„ç»Ÿè®¡æ›´æ–°å‡½æ•°
      }, 100);
    });
  });

  // âœ¨ æ–°å¢:ç»ƒä¹ å¡ç‰‡åŠ¨ç”»å‡½æ•°
  function animatePracticeCards() {
    const cards = document.querySelectorAll('.practice-card');
    
    cards.forEach((card, index) => {
      setTimeout(() => {
        card.classList.add('animate-in');
      }, index * 100); // æ¯å¼ å¡ç‰‡å»¶è¿Ÿ 100ms,å½¢æˆå±‚å æ•ˆæœ
    });
  }
    // ============================================
    // ç»ƒä¹ æ•°æ® - å®Œæ•´ç‰ˆæœ¬(15ä¸ªç»ƒä¹ )
    // ============================================
    const practiceData = [
      // ========== èº«ä½“ä¸­ç«‹ä¸“å±ç»ƒä¹ (5ä¸ª) ==========
      {
        id: 'mirror-kindness',
        title: 'é•œå­å‹å–„ç»ƒä¹ ',
        description: 'ç”¨æ¸©æŸ”çš„çœ¼å…‰çœ‹è‡ªå·±',
        category: 'body-neutral',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-user-circle',
        color: 'bg-blue-100 text-blue-600',
        link: 'mirror-kindness.html',
        benefits: ['å‡å°‘è‡ªæˆ‘æ‰¹è¯„', 'å»ºç«‹å‹å–„è§†è§’', 'èº«ä½“æ¥çº³']
      },
      {
        id: 'social-media-detox',
        title: 'ç¤¾äº¤åª’ä½“æ¸…é†’',
        description: 'ä»æ¯”è¾ƒä¸­æŠ½ç¦»,å›åˆ°ç°å®',
        category: 'body-neutral',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-mobile',
        color: 'bg-cyan-100 text-cyan-600',
        link: 'social-media-detox.html',
        benefits: ['æ‘†è„±æ¯”è¾ƒ', 'ç°å®æ£€éªŒ', 'ä»·å€¼æ¾„æ¸…']
      },
      {
        id: 'mindful-eating-light',
        title: 'æ— ç½ªæ„Ÿé¥®é£Ÿ',
        description: 'é£Ÿç‰©æ— é“å¾·å±æ€§',
        category: 'body-neutral',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-cutlery',
        color: 'bg-green-100 text-green-600',
        link: 'mindful-eating-light.html',
        benefits: ['å‡å°‘ç½ªæ¶æ„Ÿ', 'æ­£å¿µè¿›é£Ÿ', 'äº«å—é£Ÿç‰©']
      },
      {
        id: 'exercise-mindset',
        title: 'è¿åŠ¨å¿ƒæ€è½¬æ¢',
        description: 'åº†ç¥èº«ä½“è€Œéæƒ©ç½š',
        category: 'body-neutral',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-heartbeat',
        color: 'bg-orange-100 text-orange-600',
        link: 'exercise-mindset.html',
        benefits: ['æ”¹å˜è¿åŠ¨åŠ¨æœº', 'å‡å°‘æƒ©ç½šå¿ƒæ€', 'äº«å—è¿åŠ¨']
      },
      {
        id: 'body-dialogue',
        title: 'èº«ä½“éƒ¨ä½å¯¹è¯',
        description: 'ä¸èº«ä½“å’Œè§£',
        category: 'body-neutral',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-heart',
        color: 'bg-pink-100 text-pink-600',
        link: 'body-dialogue.html',
        benefits: ['ä¸èº«ä½“å’Œè§£', 'æ„Ÿæ©èº«ä½“', 'å‡å°‘å¯¹æŠ—']
      },

      // ========== é€šç”¨ç»ƒä¹ (10ä¸ª) ==========
      {
        id: 'morning-breathing',
        title: 'æ™¨é—´è§‰é†’å‘¼å¸',
        description: 'ç”¨æ¸©æŸ”çš„å‘¼å¸å”¤é†’èº«ä½“',
        category: 'morning',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-sun-o',
        color: 'bg-yellow-100 text-yellow-600',
        link: 'morning-breathing.html',
        benefits: ['æ¸©æŸ”å”¤é†’', 'æå‡ä¸“æ³¨', 'å¼€å¯æ´»åŠ›']
      },
      {
        id: 'morning-stretch',
        title: 'æ™¨é—´æ‹‰ä¼¸',
        description: 'æ„Ÿå—èº«ä½“çš„æ¯ä¸ªéƒ¨åˆ†',
        category: 'morning',
        duration: 7,
        difficulty: 'ç®€å•',
        icon: 'fa-hand-peace-o',
        color: 'bg-green-100 text-green-600',
        link: 'morning-stretch.html',
        benefits: ['èº«ä½“è§‰å¯Ÿ', 'æ¸©æŸ”å¯¹å¾…', 'å»ºç«‹è¿æ¥']
      },
      {
        id: 'work-breathing',
        title: 'åŠå…¬å®¤å‘¼å¸ç»ƒä¹ ',
        description: 'çŸ­æš‚ä¼‘æ¯,ç…§é¡¾ç–²æƒ«çš„èº«ä½“',
        category: 'work',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-coffee',
        color: 'bg-blue-100 text-blue-600',
        link: 'work-breathing.html',
        benefits: ['å¿«é€Ÿæ¢å¤', 'é‡Šæ”¾å‹åŠ›', 'æå‡æ•ˆç‡']
      },
      {
        id: 'evening-relax',
        title: 'æ™šé—´æ”¾æ¾',
        description: 'æ¸©æŸ”åœ°ç»“æŸä¸€å¤©',
        category: 'evening',
        duration: 10,
        difficulty: 'ç®€å•',
        icon: 'fa-moon-o',
        color: 'bg-purple-100 text-purple-600',
        link: 'evening-relax.html',
        benefits: ['æ”¹å–„ç¡çœ ', 'æ·±åº¦æ”¾æ¾', 'æ„Ÿæ©èº«ä½“']
      },
      {
        id: 'gratitude-practice',
        title: 'æ„Ÿæ©ç»ƒä¹ ',
        description: 'æ„Ÿè°¢èº«ä½“çš„é™ªä¼´',
        category: 'emotion',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-gift',
        color: 'bg-pink-100 text-pink-600',
        link: 'gratitude-practice.html',
        benefits: ['åŸ¹å…»æ„Ÿæ©', 'ç§¯æå¿ƒæ€', 'å¹¸ç¦æ„Ÿæå‡']
      },
      {
        id: 'walking-meditation',
        title: 'è¡Œèµ°å†¥æƒ³',
        description: 'åœ¨è¡Œèµ°ä¸­è§‰å¯Ÿ',
        category: 'emotion',
        duration: 10,
        difficulty: 'ç®€å•',
        icon: 'fa-street-view',
        color: 'bg-teal-100 text-teal-600',
        link: 'walking-meditation.html',
        benefits: ['èº«å¿ƒåˆä¸€', 'å½“ä¸‹è§‰å¯Ÿ', 'å‹åŠ›é‡Šæ”¾']
      },
      {
        id: 'self-compassion',
        title: 'è‡ªæˆ‘æ…ˆæ‚²',
        description: 'åƒå¯¹å¾…æœ‹å‹ä¸€æ ·å¯¹å¾…è‡ªå·±',
        category: 'emotion',
        duration: 8,
        difficulty: 'ä¸­ç­‰',
        icon: 'fa-heart-o',
        color: 'bg-rose-100 text-rose-600',
        link: 'self-compassion.html',
        benefits: ['è‡ªæˆ‘æ¥çº³', 'å‡å°‘æ‰¹åˆ¤', 'å†…åœ¨å’Œå¹³']
      },
      {
        id: 'quick-calm',
        title: 'å¿«é€Ÿå¹³é™',
        description: 'ç´§æ€¥æƒ…å†µä¸‹çš„æƒ…ç»ªæ€¥æ•‘',
        category: 'emotion',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-bolt',
        color: 'bg-red-100 text-red-600',
        link: 'quick-calm.html',
        benefits: ['å¿«é€Ÿå†·é™', 'åº”æ€¥å¤„ç†', 'æ¢å¤ç†æ™º']
      },
      {
        id: 'sleep-preparation',
        title: 'ç¡å‰æ”¾æ¾',
        description: 'ä¸ºä¼˜è´¨ç¡çœ åšå‡†å¤‡',
        category: 'evening',
        duration: 12,
        difficulty: 'ç®€å•',
        icon: 'fa-bed',
        color: 'bg-indigo-100 text-indigo-600',
        link: 'sleep-preparation.html',
        benefits: ['åŠ©çœ ', 'æ·±åº¦æ”¾æ¾', 'æ”¹å–„ç¡çœ è´¨é‡']
      },
      {
        id: 'energy-boost',
        title: 'èƒ½é‡æå‡',
        description: 'å¿«é€Ÿæ¢å¤ç²¾åŠ›',
        category: 'work',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-flash',
        color: 'bg-amber-100 text-amber-600',
        link: 'energy-boost.html',
        benefits: ['æ¢å¤æ´»åŠ›', 'æå‡ä¸“æ³¨', 'æˆ˜èƒœç–²æƒ«']
      }
    ];

    // å…¨å±€å˜é‡
    let practiceHistory = [];

    // ============================================
    // æ ¸å¿ƒåŠŸèƒ½
    // ============================================

    // æ¸²æŸ“ç»ƒä¹ å¡ç‰‡
    function renderPracticeCards(filterCategory = 'all') {
      const grid = document.getElementById('practiceGrid');
      grid.innerHTML = '';
      
      const filteredPractices = filterCategory === 'all' 
        ? practiceData 
        : practiceData.filter(p => p.category === filterCategory);
      
      filteredPractices.forEach(practice => {
        const card = createPracticeCard(practice);
        grid.appendChild(card);
      });
    }

    // åˆ›å»ºç»ƒä¹ å¡ç‰‡
    function createPracticeCard(practice) {
      const card = document.createElement('div');
      card.className = 'practice-card bg-white rounded-2xl p-6 shadow-sm';
      card.onclick = () => startPractice(practice);
      
      card.innerHTML = `
        <div class="flex items-start justify-between mb-4">
          <div class="w-12 h-12 ${practice.color} rounded-xl flex items-center justify-center">
            <i class="fa ${practice.icon} text-2xl"></i>
          </div>
          <span class="text-xs bg-gray-100 px-3 py-1 rounded-full text-gray-600">
            ${practice.duration}åˆ†é’Ÿ
          </span>
        </div>
        
        <h3 class="text-lg font-bold text-gray-800 mb-2">${practice.title}</h3>
        <p class="text-sm text-gray-600 mb-4">${practice.description}</p>
        
        <div class="flex flex-wrap gap-2 mb-4">
          ${practice.benefits.map(benefit => 
            `<span class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-600">${benefit}</span>`
          ).join('')}
        </div>
        
        <div class="flex items-center justify-between text-xs text-gray-500">
          <span><i class="fa fa-signal mr-1"></i>${practice.difficulty}</span>
          <span class="text-primary font-medium">å¼€å§‹ç»ƒä¹  â†’</span>
        </div>
      `;
      
      return card;
    }

    // å¼€å§‹ç»ƒä¹ 
    function startPractice(practice) {
      showToast(`æ­£åœ¨æ‰“å¼€ ${practice.title}...`);
      
      // è®°å½•ç»ƒä¹ å¼€å§‹
      const startRecord = {
        practiceId: practice.id,
        startTime: Date.now()
      };
      sessionStorage.setItem('currentPractice', JSON.stringify(startRecord));
      
      // å»¶è¿Ÿè·³è½¬ä»¥æ˜¾ç¤ºæç¤º
      setTimeout(() => {
        window.location.href = practice.link;
      }, 500);
    }

    // æ˜¾ç¤ºToastæç¤º
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2500);
    }

    // ============================================
    // ç»Ÿè®¡åŠŸèƒ½
    // ============================================

    // åŠ è½½ç»ƒä¹ å†å²
    function loadPracticeHistory() {
      try {
        const history = localStorage.getItem('practiceHistory');
        practiceHistory = history ? JSON.parse(history) : [];
      } catch (e) {
        practiceHistory = [];
      }
    }

    // æ›´æ–°ä»Šæ—¥ç»Ÿè®¡
    function updateTodayStats() {
      const today = new Date().toDateString();
      const todayPractices = practiceHistory.filter(p => 
        new Date(p.date).toDateString() === today
      );
      
      document.getElementById('todayCompleted').textContent = todayPractices.length;
      
      // è®¡ç®—è¿ç»­å¤©æ•°
      const streak = calculateStreak();
      document.getElementById('streakDays').textContent = streak;
      
      // æœ¬å‘¨æ€»è®¡
      const weekTotal = calculateWeekTotal();
      document.getElementById('weekTotal').textContent = weekTotal;
    }

    // è®¡ç®—è¿ç»­å¤©æ•°
    function calculateStreak() {
      if (practiceHistory.length === 0) return 0;
      
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      let streak = 0;
      let currentDate = new Date(today);
      
      for (let i = 0; i < 365; i++) {
        const dateStr = currentDate.toDateString();
        const hasPractice = practiceHistory.some(p => 
          new Date(p.date).toDateString() === dateStr
        );
        
        if (hasPractice) {
          streak++;
        } else if (i > 0) {
          break;
        }
        
        currentDate.setDate(currentDate.getDate() - 1);
      }
      
      return streak;
    }

    // è®¡ç®—æœ¬å‘¨æ€»æ•°
    function calculateWeekTotal() {
      const now = new Date();
      const startOfWeek = new Date(now);
      startOfWeek.setDate(now.getDate() - now.getDay());
      startOfWeek.setHours(0, 0, 0, 0);
      
      return practiceHistory.filter(p => 
        new Date(p.date) >= startOfWeek
      ).length;
    }

    // è®¾ç½®ä»Šæ—¥æ—¥æœŸ
    function setTodayDate() {
      const today = new Date();
      const options = { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        weekday: 'long'
      };
      document.getElementById('todayDate').textContent = 
        today.toLocaleDateString('zh-CN', options);
    }

    // ============================================
    // åˆ†ç±»è¿‡æ»¤
    // ============================================

    function initCategoryFilter() {
      const filterBtns = document.querySelectorAll('.filter-btn');
      
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // ç§»é™¤æ‰€æœ‰activeç±»
          filterBtns.forEach(b => {
            b.classList.remove('active');
            b.classList.remove('bg-primary', 'text-white');
            b.classList.add('bg-gray-200', 'text-gray-600');
          });
          
          // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
          btn.classList.add('active');
          btn.classList.remove('bg-gray-200', 'text-gray-600');
          btn.classList.add('bg-primary', 'text-white');
          
          // æ¸²æŸ“å¯¹åº”åˆ†ç±»çš„å¡ç‰‡
          const category = btn.dataset.category;
          renderPracticeCards(category);
        });
      });
    }

    // ============================================
    // é¡µé¢åˆå§‹åŒ–
    // ============================================

    document.addEventListener('DOMContentLoaded', () => {
      loadPracticeHistory();
      setTodayDate();
      updateTodayStats();
      renderPracticeCards();
      initCategoryFilter();
      
      // æ¬¢è¿æç¤º
      setTimeout(() => {
        showToast('æ¬¢è¿æ¥åˆ°æ—¥å¸¸ç»ƒä¹ ï¼é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ç»ƒä¹ å¼€å§‹å§ ğŸŒ¿');
      }, 1000);
    });

    // Tailwindé…ç½®
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#4A6157",
            mint: "#8FD9A8",
            accent: "#2E2E2E"
          }
        }
      }
    };
  </script>

</body>
</html>
