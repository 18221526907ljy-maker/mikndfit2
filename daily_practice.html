<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ—¥å¸¸ç»ƒä¹  - MindFit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" />
  
  <style>
    .practice-card {
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      cursor: pointer;
    }
    
    .practice-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }
    
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 14px;
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    
    .filter-btn.active {
      background: #4A6157;
      color: white;
    }

    /* âœ¨ æ–°å¢:é¡µé¢åŠ è½½åŠ¨ç”» */
    .page-content {
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s forwards;
    }
    
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* âœ¨ æ–°å¢:ç»ƒä¹ å¡ç‰‡æ¸å…¥åŠ¨ç”» */
    .practice-card {
      opacity: 0;
      transform: scale(0.92) translateY(20px);
      transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .practice-card.animate-in {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  </style>
</head>

<body class="bg-gray-50">
  
  <!-- Toast æç¤º -->
  <div id="toast" class="toast"></div>

  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <nav class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
            <i class="fa fa-leaf text-white"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold text-primary">æ—¥å¸¸ç»ƒä¹ </h1>
            <p class="text-xs text-gray-500">é€‰æ‹©é€‚åˆå½“å‰åœºæ™¯çš„ç»ƒä¹ </p>
          </div>
        </div>
        <a href="index.html" class="text-gray-600 hover:text-primary">
          <i class="fa fa-home text-xl"></i>
        </a>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <!-- âœ¨ ä¿®æ”¹:æ·»åŠ  page-content class -->
    <div class="container page-content">

      <!-- ä»Šæ—¥è¿›åº¦å¡ç‰‡ -->
      <div class="bg-white rounded-2xl p-6 shadow-sm mb-8">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-semibold text-primary">ä»Šæ—¥ç»ƒä¹ è¿›åº¦</h2>
          <span class="text-sm text-gray-500" id="todayDate"></span>
        </div>
        
        <div class="grid md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-3xl font-bold text-primary mb-2" id="streakDays">0</div>
            <div class="text-sm text-gray-600">è¿ç»­å¤©æ•°</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-mint mb-2" id="todayCompleted">0</div>
            <div class="text-sm text-gray-600">ä»Šæ—¥å®Œæˆ</div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-accent mb-2" id="weekTotal">0</div>
            <div class="text-sm text-gray-600">æœ¬å‘¨æ€»è®¡</div>
          </div>
        </div>
      </div>

      <!-- ç»ƒä¹ åˆ†ç±» -->
      <div class="mb-8">
        <div class="flex flex-wrap gap-3 justify-center">
          <button class="filter-btn active px-6 py-2 rounded-full bg-primary text-white font-medium transition-all" data-category="all">
            å…¨éƒ¨ç»ƒä¹ 
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="body-neutral">
            ğŸŒ¿ èº«ä½“ä¸­ç«‹ä¸“å±
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="morning">
            ğŸŒ… æ™¨é—´å”¤é†’
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="work">
            ğŸ’¼ å·¥ä½œé—´éš™
          </button>
          <button class="filter-btn px-6 py-2 rounded-full bg-gray-200 text-gray-600 font-medium transition-all" data-category="emotion">
            ğŸ’« æƒ…ç»ªæ€¥æ•‘
          </button>
        </div>
      </div>

      <!-- ç»ƒä¹ å¡ç‰‡ç½‘æ ¼ -->
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto" id="practiceGrid">
        <!-- ç»ƒä¹ å¡ç‰‡é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>

    </div>
  </main>

  <script>
    // Tailwindé…ç½®
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#4A6157",
            mint: "#8FD9A8",
            accent: "#2E2E2E"
          }
        }
      }
    };

    // âœ¨ æ–°å¢:é¡µé¢åŠ è½½åŠ¨ç”»åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      window.addEventListener('load', function() {
        setTimeout(() => {
          animatePracticeCards();
          initializePage();
        }, 100);
      });
    });

    // âœ¨ æ–°å¢:ç»ƒä¹ å¡ç‰‡åŠ¨ç”»å‡½æ•°
    function animatePracticeCards() {
      const cards = document.querySelectorAll('.practice-card');
      
      cards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.add('animate-in');
        }, index * 100);
      });
    }

    // åŸæœ‰ä»£ç :åˆå§‹åŒ–é¡µé¢
    function initializePage() {
      loadPracticeHistory();
      setTodayDate();
      updateTodayStats();
      initCategoryFilter();
      renderPracticeCards();
    }

    // å…¨å±€å˜é‡
    let practiceHistory = [];

    // ç»ƒä¹ æ•°æ®
    const practiceData = [
      {
        id: 'mirror-kindness',
        title: 'é•œå­å‹å–„ç»ƒä¹ ',
        description: 'ç”¨æ¸©æŸ”çš„çœ¼å…‰çœ‹è‡ªå·±',
        category: 'body-neutral',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-user-circle',
        color: 'bg-blue-100 text-blue-600',
        link: 'mirror-kindness.html'
      },
      {
        id: 'social-media-detox',
        title: 'ç¤¾äº¤åª’ä½“æ¸…é†’',
        description: 'ä»æ¯”è¾ƒä¸­æŠ½ç¦»,å›åˆ°ç°å®',
        category: 'body-neutral',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-mobile',
        color: 'bg-cyan-100 text-cyan-600',
        link: 'social-media-detox.html'
      },
      {
        id: 'mindful-eating-light',
        title: 'æ— ç½ªæ„Ÿé¥®é£Ÿ',
        description: 'é£Ÿç‰©æ— é“å¾·å±æ€§',
        category: 'body-neutral',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-cutlery',
        color: 'bg-green-100 text-green-600',
        link: 'mindful-eating-light.html'
      },
      {
        id: 'exercise-mindset',
        title: 'è¿åŠ¨å¿ƒæ€è½¬æ¢',
        description: 'åº†ç¥èº«ä½“è€Œéæƒ©ç½š',
        category: 'body-neutral',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-heartbeat',
        color: 'bg-orange-100 text-orange-600',
        link: 'exercise-mindset.html'
      },
      {
        id: 'body-dialogue',
        title: 'èº«ä½“éƒ¨ä½å¯¹è¯',
        description: 'ä¸èº«ä½“å’Œè§£',
        category: 'body-neutral',
        duration: 7,
        difficulty: 'ä¸­ç­‰',
        icon: 'fa-comments',
        color: 'bg-purple-100 text-purple-600',
        link: 'body-dialogue.html'
      },
      {
        id: 'morning-breathing',
        title: 'æ™¨é—´è§‰é†’å‘¼å¸',
        description: 'æ¸©æŸ”å”¤é†’èº«ä½“',
        category: 'morning',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-sun-o',
        color: 'bg-yellow-100 text-yellow-600',
        link: 'morning-breathing.html'
      },
      {
        id: 'morning-stretch',
        title: 'æ¸©æŸ”èº«ä½“è§‰å¯Ÿ',
        description: 'ä»å¤´åˆ°è„šæ‰«æèº«ä½“',
        category: 'morning',
        duration: 7,
        difficulty: 'ç®€å•',
        icon: 'fa-street-view',
        color: 'bg-amber-100 text-amber-600',
        link: 'morning-stretch.html'
      },
      {
        id: 'work-breathing',
        title: 'åŠå…¬å®¤å‘¼å¸ç»ƒä¹ ',
        description: 'å¿«é€Ÿé‡ç½®,æ¢å¤ä¸“æ³¨',
        category: 'work',
        duration: 3,
        difficulty: 'ç®€å•',
        icon: 'fa-briefcase',
        color: 'bg-blue-100 text-blue-600',
        link: 'work-breathing.html'
      },
      {
        id: 'evening-relax',
        title: 'ç¡å‰æ”¾æ¾ç»ƒä¹ ',
        description: 'æ¸è¿›å¼è‚Œè‚‰æ”¾æ¾',
        category: 'emotion',
        duration: 8,
        difficulty: 'ç®€å•',
        icon: 'fa-moon-o',
        color: 'bg-indigo-100 text-indigo-600',
        link: 'evening-relax.html'
      },
      {
        id: 'gratitude-practice',
        title: 'æ„Ÿæ©ç»ƒä¹ ',
        description: 'å‘ç°ç”Ÿæ´»ä¸­çš„ç¾å¥½',
        category: 'emotion',
        duration: 5,
        difficulty: 'ç®€å•',
        icon: 'fa-heart',
        color: 'bg-rose-100 text-rose-600',
        link: 'gratitude-practice.html'
      }
    ];

    // æ¸²æŸ“ç»ƒä¹ å¡ç‰‡
    function renderPracticeCards(filterCategory = 'all') {
      const grid = document.getElementById('practiceGrid');
      const filteredData = filterCategory === 'all' 
        ? practiceData 
        : practiceData.filter(p => p.category === filterCategory);
      
      grid.innerHTML = filteredData.map(practice => `
        <div class="practice-card bg-white rounded-2xl p-6 shadow-sm" 
             data-category="${practice.category}"
             onclick="window.location.href='${practice.link}'">
          <div class="flex items-start justify-between mb-4">
            <div class="w-14 h-14 ${practice.color} rounded-xl flex items-center justify-center">
              <i class="fa ${practice.icon} text-2xl"></i>
            </div>
            <span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">
              ${practice.duration}åˆ†é’Ÿ
            </span>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">${practice.title}</h3>
          <p class="text-sm text-gray-600 mb-4">${practice.description}</p>
          <div class="flex items-center justify-between">
            <span class="text-xs text-gray-500">${practice.difficulty}</span>
            <button class="text-primary hover:text-mint transition-colors">
              å¼€å§‹ç»ƒä¹  â†’
            </button>
          </div>
        </div>
      `).join('');

      // é‡æ–°è§¦å‘åŠ¨ç”»
      animatePracticeCards();
    }

    // åŠ è½½ç»ƒä¹ å†å²
    function loadPracticeHistory() {
      try {
        const history = localStorage.getItem('practiceHistory');
        practiceHistory = history ? JSON.parse(history) : [];
      } catch (e) {
        practiceHistory = [];
      }
    }

    // æ›´æ–°ä»Šæ—¥ç»Ÿè®¡
    function updateTodayStats() {
      const today = new Date().toDateString();
      const todayPractices = practiceHistory.filter(p => 
        new Date(p.date).toDateString() === today
      );
      
      document.getElementById('todayCompleted').textContent = todayPractices.length;
      document.getElementById('streakDays').textContent = calculateStreak();
      document.getElementById('weekTotal').textContent = calculateWeekTotal();
    }

    // è®¡ç®—è¿ç»­å¤©æ•°
    function calculateStreak() {
      if (practiceHistory.length === 0) return 0;
      
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      let streak = 0;
      let currentDate = new Date(today);
      
      for (let i = 0; i < 365; i++) {
        const dateStr = currentDate.toDateString();
        const hasPractice = practiceHistory.some(p => 
          new Date(p.date).toDateString() === dateStr
        );
        
        if (hasPractice) {
          streak++;
        } else if (i > 0) {
          break;
        }
        
        currentDate.setDate(currentDate.getDate() - 1);
      }
      
      return streak;
    }

    // è®¡ç®—æœ¬å‘¨æ€»æ•°
    function calculateWeekTotal() {
      const now = new Date();
      const startOfWeek = new Date(now);
      startOfWeek.setDate(now.getDate() - now.getDay());
      startOfWeek.setHours(0, 0, 0, 0);
      
      return practiceHistory.filter(p => 
        new Date(p.date) >= startOfWeek
      ).length;
    }

    // è®¾ç½®ä»Šæ—¥æ—¥æœŸ
    function setTodayDate() {
      const today = new Date();
      const options = { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        weekday: 'long'
      };
      document.getElementById('todayDate').textContent = 
        today.toLocaleDateString('zh-CN', options);
    }

    // åˆ†ç±»è¿‡æ»¤
    function initCategoryFilter() {
      const filterBtns = document.querySelectorAll('.filter-btn');
      
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          filterBtns.forEach(b => {
            b.classList.remove('active', 'bg-primary', 'text-white');
            b.classList.add('bg-gray-200', 'text-gray-600');
          });
          
          btn.classList.remove('bg-gray-200', 'text-gray-600');
          btn.classList.add('active', 'bg-primary', 'text-white');
          
          const category = btn.dataset.category;
          renderPracticeCards(category);
        });
      });
    }

    // Toast æç¤º
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
  </script>

</body>
</html>
